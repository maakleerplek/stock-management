import{ag as g,r as l,ab as i,ao as o,aO as p,j as t,an as R,ak as m,as as r}from"./index-DjOBj_Ai.js";import{S as C}from"./ThemeContext-BjJu0IKI.js";import{c as v,j as w,e as A,m as F,h as f}from"./Filter-CpWhllKn.js";import{u as S,R as M,c as B,a as D,I as P}from"./InvenTreeTable-C-s5lvnS.js";import{D as q,B as k}from"./ColumnRenderers-BCeqgJNS.js";import{R as E}from"./PluginUIFeature-DWPwHUQS.js";import"./DesktopAppView-D6tHFi_e.js";import"./ActionButton-D4nRdKaB.js";import"./IconChevronDown-I6OOyduR.js";import"./index-_kfXKtfq.js";import"./QRCode-BL-P7mX-.js";import"./browser-JUP5PmmS.js";import"./IconDotsVertical-CGvw5eIR.js";import"./IconTags-Bukq1non.js";import"./YesNoButton-CYsvXLSb.js";import"./formatters-Dkpc25sQ.js";function N(){const e=S("part-parameter-templates"),s=g(),h=l.useMemo(()=>[{name:"checkbox",label:i._({id:"G1XxbZ"}),description:i._({id:"jaUfxb"})},{name:"has_choices",label:i._({id:"dBda4v"}),description:i._({id:"f1PxeH"})},{name:"has_units",label:i._({id:"YyRdJQ"}),description:i._({id:"jJ6ck0"})}],[]),c=l.useMemo(()=>[{accessor:"name",sortable:!0,switchable:!1},{accessor:"parts",sortable:!0,switchable:!0},{accessor:"units",sortable:!0},q({}),k({accessor:"checkbox"}),{accessor:"choices"}],[]),n=l.useMemo(()=>({name:{},description:{},units:{},choices:{},checkbox:{},selectionlist:{}}),[]),a=v({url:o.part_parameter_template_list,title:i._({id:"+ueC+W"}),table:e,fields:l.useMemo(()=>({...n}),[n])}),[d,u]=l.useState(void 0),b=v({url:o.part_parameter_template_list,title:i._({id:"wnSG3S"}),table:e,fields:l.useMemo(()=>({...n}),[n]),initialData:d}),x=w({url:o.part_parameter_template_list,pk:d?.pk,title:i._({id:"TEThbN"}),table:e,fields:l.useMemo(()=>({...n}),[n])}),_=A({url:o.part_parameter_template_list,pk:d?.pk,title:i._({id:"BXI6AQ"}),table:e}),y=l.useCallback(j=>[M({hidden:!s.hasChangeRole(p.part),onClick:()=>{u(j),x.open()}}),B({hidden:!s.hasAddRole(p.part),onClick:()=>{u(j),b.open()}}),D({hidden:!s.hasDeleteRole(p.part),onClick:()=>{u(j),_.open()}})],[s]),L=l.useMemo(()=>[t.jsx(F,{tooltip:i._({id:"+ueC+W"}),onClick:()=>a.open(),hidden:!s.hasAddRole(p.part)},"add")],[s]);return t.jsxs(t.Fragment,{children:[a.modal,x.modal,b.modal,_.modal,t.jsx(P,{url:R(o.part_parameter_template_list),tableState:e,columns:c,props:{rowActions:y,tableFilters:h,tableActions:L,enableDownload:!0}})]})}function I({props:e}){const s=l.useMemo(()=>({field_type:"string",name:"value",required:!0,value:e.item.value,onValueChange:a=>{e.changeFn(e.idx,"value",a)}}),[e]),h=l.useMemo(()=>({field_type:"string",name:"label",required:!0,value:e.item.label,onValueChange:a=>{e.changeFn(e.idx,"label",a)}}),[e]),c=l.useMemo(()=>({field_type:"string",name:"description",required:!0,value:e.item.description,onValueChange:a=>{e.changeFn(e.idx,"description",a)}}),[e]),n=l.useMemo(()=>({field_type:"boolean",name:"active",required:!0,value:e.item.active,onValueChange:a=>{e.changeFn(e.idx,"active",a)}}),[e]);return t.jsxs(m.Tr,{children:[t.jsx(m.Td,{children:t.jsx(f,{fieldName:"value",fieldDefinition:s})}),t.jsx(m.Td,{children:t.jsx(f,{fieldName:"label",fieldDefinition:h})}),t.jsx(m.Td,{children:t.jsx(f,{fieldName:"description",fieldDefinition:c})}),t.jsx(m.Td,{children:t.jsx(f,{fieldName:"active",fieldDefinition:n})}),t.jsx(m.Td,{children:t.jsx(E,{onClick:()=>e.removeFn(e.idx)})})]},`table-row-${e.item.id??e.idx}`)}function T(){return{name:{},description:{},active:{},locked:{},source_plugin:{},source_string:{},choices:{label:i._({id:"ef6vAZ"}),description:i._({id:"f/qYPq"}),field_type:"table",value:[],headers:[{title:i._({id:"wMHvYH"})},{title:i._({id:"87a/t/"})},{title:i._({id:"Nu4oKW"})},{title:i._({id:"F6pfE9"})}],modelRenderer:e=>t.jsx(I,{props:e}),addRow:()=>({value:"",label:"",description:"",active:!0})}}}function H(){const e=S("selectionlist"),s=g(),h=l.useMemo(()=>[{accessor:"name",sortable:!0},q({sortable:!0}),k({accessor:"active"}),k({accessor:"locked"}),{accessor:"source_plugin",sortable:!0},{accessor:"source_string",sortable:!0},{accessor:"entry_count"}],[]),c=v({url:o.selectionlist_list,title:i._({id:"HCpwcG"}),fields:T(),table:e}),[n,a]=l.useState(void 0),d=w({url:o.selectionlist_list,pk:n,title:i._({id:"n7tNkj"}),fields:T(),table:e}),u=A({url:o.selectionlist_list,pk:n,title:i._({id:"fo+0WX"}),table:e}),b=l.useCallback(_=>[M({hidden:!s.hasChangeRole(p.admin),onClick:()=>{a(_.pk),d.open()}}),D({hidden:!s.hasDeleteRole(p.admin),onClick:()=>{a(_.pk),u.open()}})],[s]),x=l.useMemo(()=>[t.jsx(F,{onClick:()=>c.open(),tooltip:i._({id:"HCpwcG"})},"add-selection-list")],[]);return t.jsxs(t.Fragment,{children:[c.modal,d.modal,u.modal,t.jsx(P,{url:R(o.selectionlist_list),tableState:e,columns:h,props:{rowActions:b,tableActions:x,enableDownload:!0}})]})}function le(){return t.jsxs(r,{defaultValue:"parametertemplate",children:[t.jsxs(r.Item,{value:"parametertemplate",children:[t.jsx(r.Control,{children:t.jsx(C,{size:"lg",children:i._({id:"hAddRl"})})}),t.jsx(r.Panel,{children:t.jsx(N,{})})]},"parametertemplate"),t.jsxs(r.Item,{value:"selectionlist",children:[t.jsx(r.Control,{children:t.jsx(C,{size:"lg",children:i._({id:"2q2/qs"})})}),t.jsx(r.Panel,{children:t.jsx(H,{})})]},"selectionlist")]})}export{le as default};
//# sourceMappingURL=PartParameterPanel-BbhE0JGb.js.map
