import{K as ie,aP as gt,aQ as mt,aR as ft,aS as xt,aT as W,aU as F,j as e,aV as St,a4 as oe,M as se,r as u,aW as _t,V as We,ad as jt,aX as bt,aY as vt,U as kt,aZ as yt,a_ as Et,a$ as Ct,b0 as wt,b1 as At,u as Fe,a as de,az as ge,ag as P,ab as r,aO as j,aC as Z,b2 as le,aa as I,ac as N,b3 as Rt,b4 as v,N as w,d as L,b5 as It,b6 as Ee,c as z,b7 as Nt,S as re,aj as Ae,b8 as Vt,A as Re,b9 as B,ba as Ie,bb as Mt,bc as y,bd as Be,al as q,b as Ne,e as X,an as Y,ao as J,aq as ue,a7 as zt,C as Qe,be as $e,a8 as Ke,aD as Dt,$ as Lt,g as Ge,bf as me,as as ce,ay as Tt,bg as Ce,bh as Ot,bi as Ze,av as Ht,ah as Pt,bj as Ut,ar as ae,ai as Wt,bk as Ft}from"./index-DjOBj_Ai.js";import{r as qe,t as H,v as Ve,w as Xe,o as Bt,x as Qt,B as $t,a as Q,y as Kt,S as Me,z as He,A as fe,C as ze,E as he,F as Gt,G as Zt,H as qt,J as Xt,K as Yt,u as Ye,O as Jt,j as es}from"./ThemeContext-BjJu0IKI.js";import{a as Je,s as ts,l as ss,d as ns,D as is,A as os,g as Pe}from"./links-gIae6K_e.js";import{I as rs,a as as,b as ls}from"./IconChevronDown-I6OOyduR.js";import{u as cs,R as ds,A as us}from"./Filter-CpWhllKn.js";import{u as hs,c as ps,P as gs}from"./PluginUIFeature-DWPwHUQS.js";import{u as ms}from"./UsePluginUIFeature-DBND8C-h.js";import{A as fs}from"./Alerts-Bb_RrL4j.js";import{L as we,N as xs}from"./DesktopAppView-D6tHFi_e.js";import{I as Ss,a as _s}from"./IconSun-DWiFT75e.js";import{u as js,I as bs}from"./UseInstanceName-tQvebO4s.js";import{I as et}from"./IconBellCheck-B46hhDfk.js";import{g as vs}from"./ModelType-BxY4rynO.js";import{I as ks}from"./IconAlertCircle-drog1GMj.js";import"./ActionButton-D4nRdKaB.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["path",{d:"M7 9a2 2 0 1 1 2 -2v10a2 2 0 1 1 -2 -2h10a2 2 0 1 1 -2 2v-10a2 2 0 1 1 2 2h-10",key:"svg-0"}]],Es=ie("outline","command","Command",ys);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M9 12h12l-3 -3",key:"svg-1"}],["path",{d:"M18 15l3 -3",key:"svg-2"}]],ws=ie("outline","logout","Logout",Cs);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z",key:"svg-0"}]],Rs=ie("outline","pointer","Pointer",As);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]],Ns=ie("outline","table-export","TableExport",Is);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h2.5",key:"svg-1"}],["path",{d:"M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M19.001 15.5v1.5",key:"svg-3"}],["path",{d:"M19.001 21v1.5",key:"svg-4"}],["path",{d:"M22.032 17.25l-1.299 .75",key:"svg-5"}],["path",{d:"M17.27 20l-1.3 .75",key:"svg-6"}],["path",{d:"M15.97 17.25l1.3 .75",key:"svg-7"}],["path",{d:"M20.733 20l1.3 .75",key:"svg-8"}]],tt=ie("outline","user-cog","UserCog",Vs),Ms=()=>gt({opened:!1,empty:!1,selected:-1,listId:"",query:"",registeredActions:new Set}),zs=s=>mt(s);function ee(s,t){const i=t.getState();t.setState({...i,...s(t.getState())})}function st(s){ee(()=>({opened:!0,selected:-1}),s)}function nt(s){ee(()=>({opened:!1}),s)}function it(s){ee(t=>({opened:!t.opened,selected:t.opened?t.selected:-1}),s)}function ot(s,t){t.updateState(i=>({...i,selected:s}))}function Ds(s,t){t.updateState(i=>({...i,listId:s}))}function pe(s,t=document){const i=t.querySelector(s);if(i)return i;const o=t instanceof ShadowRoot?t.host.children:t.children;for(let l=0;l<o.length;l+=1){const n=o[l];if(n.shadowRoot){const d=pe(s,n.shadowRoot);if(d)return d}const a=pe(s,n);if(a)return a}return null}function xe(s,t){const i=t.getState(),o=i.listId?pe(`#${i.listId}`):null,l=o?.querySelector("[data-selected]"),n=o?.querySelectorAll("[data-action]")??[],a=s===-1?n.length-1:s===n.length?0:s,d=ft(a,0,n.length-1);return l?.removeAttribute("data-selected"),n[d]?.scrollIntoView({block:"nearest"}),n[d]?.setAttribute("data-selected","true"),ot(d,t),d}function Ls(s){return xe(s.getState().selected+1,s)}function Ts(s){return xe(s.getState().selected-1,s)}function Os(s){const t=s.getState();pe(`#${t.listId} [data-selected]`)?.click()}function Hs(s,t){const i=t.getState();return i.registeredActions.add(s),()=>{i.registeredActions.delete(s)}}function Ps(s,t){ee(()=>({query:s}),t),Promise.resolve().then(()=>{xe(0,t),ee(i=>({empty:i.query.trim().length>0&&i.registeredActions.size===0||!1}),t)})}function Us({clearQuery:s},t){t.updateState(i=>({...i,selected:-1,query:s?"":i.query,empty:s?!1:i.empty}))}const D={open:st,close:nt,toggle:it,updateState:ee,setSelectedAction:ot,setListId:Ds,selectAction:xe,selectNextAction:Ls,selectPreviousAction:Ts,triggerSelectedAction:Os,registerAction:Hs,setQuery:Ps,clearSpotlightState:Us};function rt(){const s=Ms();return[s,{open:()=>st(s),close:()=>nt(s),toggle:()=>it(s)}]}const[at,Se]=rt(),{open:Un,close:Wn,toggle:Fn}=Se;function lt(s){const t=s;return t.group!==void 0&&Array.isArray(t.actions)}function Ws(s){return Array.isArray(s)?s.map(t=>t.trim()).join(",").toLowerCase().trim():typeof s=="string"?s.toLowerCase().trim():""}function Fs(s){return s.reduce((t,i)=>"actions"in i?[...t,...i.actions.map(o=>({...o,group:i.group}))]:[...t,i],[])}function Bs(s){const t={},i=[];return s.forEach(o=>{o.group?(t[o.group]||(t[o.group]={pushed:!1,data:{group:o.group,actions:[]}}),t[o.group].data.actions.push(o),t[o.group].pushed||(t[o.group].pushed=!0,i.push(t[o.group].data))):i.push(o)}),i}const Qs=(s,t)=>{const i=s.trim().toLowerCase(),o=[[],[]];return Fs(t).forEach(n=>{n.label?.toLowerCase().includes(i)?o[0].push(n):(n.description?.toLowerCase().includes(i)||Ws(n.keywords).includes(i))&&o[1].push(n)}),Bs(o.flat())};function ct(s,t){if(!Array.isArray(s))return[];let i=0;return s.reduce((o,l)=>{if(i>=t)return o;if(lt(l)){const n=ct(l.actions,t-i);o.push({group:l.group,actions:n}),i+=n.length}else o.push(l),i+=1;return o},[])}const[$s,te]=xt("Spotlight component was not found in tree");var T={root:"m_d2b315db",content:"m_3cd250e0",body:"m_d2abce9b",search:"m_f366a061",actionsList:"m_6e463822",action:"m_d49bb8ef",actionBody:"m_3d475731",actionSection:"m_832642f6",actionLabel:"m_6c2a1345",actionDescription:"m_a6d9d78d",empty:"m_82f78f74",footer:"m_ddcaf054",actionsGroup:"m_5a3e5f7b"};const Ks={dimmedSections:!0,highlightQuery:!1},ne=W((s,t)=>{const i=F("SpotlightAction",Ks,s),{className:o,style:l,classNames:n,styles:a,id:d,description:p,label:c,leftSection:f,rightSection:h,children:g,dimmedSections:b,highlightQuery:x,highlightColor:A,closeSpotlightOnTrigger:_,onClick:M,onMouseDown:R,keywords:$,vars:U,...E}=i,C=te(),m={classNames:n,styles:a},S=x&&typeof c=="string"?e.jsx(St,{component:"span",highlight:C.query,color:A,...C.getStyles("actionLabel",m),children:c}):e.jsx("span",{...C.getStyles("actionLabel",m),children:c});return e.jsx(oe,{ref:t,"data-action":!0,...C.getStyles("action",{className:o,style:l,...m}),...E,onMouseDown:k=>{k.preventDefault(),R?.(k)},onClick:k=>{M?.(k),(_??C.closeOnActionTrigger)&&D.close(C.store)},tabIndex:-1,children:g||e.jsxs(e.Fragment,{children:[f&&e.jsx(se,{component:"span",mod:{position:"left",dimmed:b},...C.getStyles("actionSection",m),children:f}),e.jsxs("span",{...C.getStyles("actionBody",m),children:[S,e.jsx("span",{...C.getStyles("actionDescription",m),children:p})]}),h&&e.jsx(se,{component:"span",mod:{position:"right",dimmed:b},...C.getStyles("actionSection",m),children:h})]})})});ne.classes=T;ne.displayName="@mantine/spotlight/SpotlightAction";const _e=W((s,t)=>{const{className:i,style:o,styles:l,classNames:n,label:a,children:d,...p}=F("SpotlightActionsGroup",null,s),c=te();return e.jsx(se,{...c.getStyles("actionsGroup",{className:i,style:o,classNames:n,styles:l}),ref:t,...p,__vars:{"--spotlight-label":`'${a?.replace(/'/g,"\\'")}'`},children:d})});_e.classes=T;_e.displayName="@mantine/core/SpotlightActionsGroup";const je=W((s,t)=>{const{className:i,style:o,id:l,children:n,vars:a,classNames:d,styles:p,...c}=F("SpotlightActionsList",null,s),f=te(),h=`mantine-${u.useId().replace(/:/g,"")}`,g=l||h;return u.useEffect(()=>(D.setListId(g,f.store),()=>D.setListId("",f.store)),[]),e.jsx(_t.Autosize,{...f.getStyles("actionsList",{className:i,style:o,classNames:d,styles:p}),ref:t,type:"scroll",scrollbarSize:"var(--spotlight-actions-list-padding)",offsetScrollbars:"y",id:g,...c,children:n})});je.classes=T;je.displayName="@mantine/spotlight/SpotlightActionsList";const be=W((s,t)=>{const{className:i,style:o,classNames:l,styles:n,...a}=F("SpotlightEmpty",null,s),d=te();return e.jsx(se,{ref:t,...d.getStyles("empty",{classNames:l,styles:n,className:i,style:o}),...a})});be.classes=T;be.displayName="@mantine/spotlight/SpotlightEmpty";const De=W((s,t)=>{const{className:i,style:o,classNames:l,styles:n,...a}=F("SpotlightFooter",null,s),d=te();return e.jsx(se,{ref:t,...d.getStyles("footer",{className:i,classNames:l,style:o,styles:n}),...a})});De.classes=T;De.displayName="@mantine/spotlight/SpotlightFooter";function Gs(s,t){if(!s)return[];const i=()=>D.open(t);return Array.isArray(s)?s.map(o=>[o,i]):[[s,i]]}const Zs={size:600,yOffset:80,zIndex:We("max"),overlayProps:{backgroundOpacity:.35,blur:7},transitionProps:{duration:200,transition:"pop"},store:at,clearQueryOnClose:!0,closeOnActionTrigger:!0,shortcut:"mod + K",maxHeight:400},ve=W((s,t)=>{const i=F("SpotlightRoot",Zs,s),{classNames:o,className:l,style:n,styles:a,unstyled:d,vars:p,store:c,children:f,query:h,onQueryChange:g,transitionProps:b,clearQueryOnClose:x,shortcut:A,tagsToIgnore:_,triggerOnContentEditable:M,disabled:R,onSpotlightOpen:$,onSpotlightClose:U,forceOpened:E,closeOnActionTrigger:C,maxHeight:m,scrollable:S,attributes:k,...O}=i,K=jt(),{opened:ye,query:ut}=zs(c),ht=typeof h=="string"?h:ut,Te=Oe=>{g?.(Oe),D.setQuery(Oe,c)},pt=bt({name:"Spotlight",classes:T,props:i,className:l,style:n,classNames:o,styles:a,unstyled:d,attributes:k});return qe(Gs(A,c),_,M),vt(()=>{ye?$?.():U?.()},[ye]),R?null:e.jsx($s,{value:{getStyles:pt,query:ht,setQuery:Te,store:c,closeOnActionTrigger:C},children:e.jsx(kt,{ref:t,...O,withCloseButton:!1,opened:ye||!!E,padding:0,onClose:()=>D.close(c),className:l,style:n,classNames:Ct({theme:K,classNames:[T,o],props:i,stylesCtx:void 0}),styles:Et({theme:K,styles:a,props:i,stylesCtx:void 0}),transitionProps:{...b,onExited:()=>{x&&Te(""),D.clearSpotlightState({clearQuery:x},c),b?.onExited?.()}},__vars:{"--spotlight-max-height":S?yt(m):void 0},__staticSelector:"Spotlight","data-scrollable":S||void 0,children:f})})});ve.classes=T;ve.displayName="@mantine/spotlight/SpotlightRoot";const qs={size:"lg"},ke=W((s,t)=>{const{classNames:i,styles:o,onKeyDown:l,onChange:n,vars:a,value:d,...p}=F("SpotlightSearch",qs,s),c=te(),f=c.getStyles("search"),[h,g]=u.useState(!1),b=x=>{l?.(x),!h&&(x.nativeEvent.code==="ArrowDown"&&(x.preventDefault(),D.selectNextAction(c.store)),x.nativeEvent.code==="ArrowUp"&&(x.preventDefault(),D.selectPreviousAction(c.store)),(x.nativeEvent.code==="Enter"||x.nativeEvent.code==="NumpadEnter")&&(x.preventDefault(),D.triggerSelectedAction(c.store)))};return e.jsx(wt,{ref:t,classNames:[{input:f.className},i],styles:[{input:f.style},o],...p,value:d??c.query,onChange:x=>{c.setQuery(x.currentTarget.value),n?.(x)},onKeyDown:b,onCompositionStart:()=>g(!0),onCompositionEnd:()=>g(!1)})});ke.classes=T;ke.displayName="@mantine/spotlight/SpotlightSearch";const Xs={size:600,yOffset:80,limit:1/0,zIndex:We("max"),overlayProps:{backgroundOpacity:.35,blur:7},transitionProps:{duration:200,transition:"pop"},store:at,filter:Qs,clearQueryOnClose:!0,closeOnActionTrigger:!0,shortcut:"mod + K"},V=W((s,t)=>{const i=F("Spotlight",Xs,s),{searchProps:o,filter:l,query:n,onQueryChange:a,actions:d,nothingFound:p,highlightQuery:c,limit:f,...h}=i,[g,b]=At({value:n,defaultValue:"",finalValue:"",onChange:a}),x=ct(l(g,d),f).map(A=>{if(lt(A)){const _=A.actions.map(({id:M,...R})=>e.jsx(ne,{highlightQuery:c,...R},M));return e.jsx(_e,{label:A.group,children:_},A.group)}return e.jsx(ne,{highlightQuery:c,...A},A.id)});return e.jsxs(ve,{...h,query:g,onQueryChange:b,ref:t,children:[e.jsx(ke,{...o}),e.jsxs(je,{children:[x,x.length===0&&p&&e.jsx(be,{children:p})]})]})});V.classes=T;V.displayName="@mantine/spotlight/Spotlight";V.Search=ke;V.ActionsList=je;V.Action=ne;V.Empty=be;V.ActionsGroup=_e;V.Footer=De;V.Root=ve;V.open=Se.open;V.close=Se.close;V.toggle=Se.toggle;function Ys(s){return Bt({modal:"qr",innerProps:{navigate:s}})}function Js(s){const t=Fe(de(n=>n.setNavigationOpen)),i=ge(),o=P();return u.useMemo(()=>{const n=[{id:"dashboard",label:r._({id:"7p5kLi"}),description:r._({id:"kwda2l"}),onClick:()=>s("/"),leftSection:e.jsx(H,{size:"1.2rem"})},{id:"documentation",label:r._({id:"TvY/XA"}),description:r._({id:"hqbo9J"}),onClick:()=>{window.location.href=ns.faq},leftSection:e.jsx(H,{size:"1.2rem"})},{id:"about",label:r._({id:"iDxamh"}),description:r._({id:"gfhzPz"}),onClick:()=>Je(),leftSection:e.jsx(H,{size:"1.2rem"})},{id:"server-info",label:r._({id:"mHGdhG"}),description:r._({id:"Ckl0UI"}),onClick:()=>ts(),leftSection:e.jsx(H,{size:"1.2rem"})},{id:"license-info",label:r._({id:"I/Xnkt"}),description:r._({id:"L23uA9"}),onClick:()=>ss(),leftSection:e.jsx(H,{size:"1.2rem"})},{id:"navigation",label:r._({id:"rmlxV1"}),description:r._({id:"xIiHCw"}),onClick:()=>t(!0),leftSection:e.jsx(Rs,{size:"1.2rem"})},{id:"scan",label:r._({id:"I+FvbD"}),description:r._({id:"9j/kJy"}),onClick:()=>Ys(s),leftSection:e.jsx(rs,{size:"1.2rem"})},{id:"user-settings",label:r._({id:"ekfzWq"}),description:r._({id:"WAOl9x"}),onClick:()=>s("/settings/user"),leftSection:e.jsx(tt,{size:"1.2rem"})}];return o?.hasViewRole(j.purchase_order)&&n.push({id:"purchase-orders",label:r._({id:"85Yvr2"}),description:r._({id:"Mvem48"}),onClick:()=>s(Z.purchaseorder.url_overview),leftSection:e.jsx(H,{size:"1.2rem"})}),o?.hasViewRole(j.sales_order)&&n.push({id:"sales-orders",label:r._({id:"B1TL+X"}),description:r._({id:"oD7kGT"}),onClick:()=>s(Z.salesorder.url_overview),leftSection:e.jsx(H,{size:"1.2rem"})}),i.isSet("RETURNORDER_ENABLED")&&o?.hasViewRole(j.return_order)&&n.push({id:"return-orders",label:r._({id:"LlTg8M"}),description:r._({id:"Fpb/1B"}),onClick:()=>s(Z.returnorder.url_overview),leftSection:e.jsx(H,{size:"1.2rem"})}),o?.hasViewRole(j.build)&&n.push({id:"builds",label:r._({id:"RCVhIP"}),description:r._({id:"K89zV/"}),onClick:()=>s(Z.build.url_overview),leftSection:e.jsx(H,{size:"1.2rem"})}),o?.isStaff()&&n.push({id:"system-settings",label:r._({id:"zNkWa6"}),description:r._({id:"WDitFV"}),onClick:()=>s("/settings/system"),leftSection:e.jsx(Ve,{size:"1.2rem"})}),o?.isStaff()&&n.push({id:"admin-center",label:r._({id:"uTLn08"}),description:r._({id:"txYotp"}),onClick:()=>{},leftSection:e.jsx(Xe,{size:"1.2rem"})}),n},[s,t,i,o])}var en="_1jb1pko0",tn="_1jb1pko1",sn="_1jb1pko2",nn="_1jb1pko3",dt="_1jb1pko7",on="_1jb1pko8",rn="_1jb1pko9",an="_1jb1pkoa",ln="_1jb1pkog";function cn(){return e.jsx("div",{className:tn})}function dn(){const[s,{open:t,close:i}]=le(!1);return e.jsxs(e.Fragment,{children:[e.jsx(I,{position:"bottom-end",label:r._({id:"fNvDwV"}),children:e.jsx(N,{onClick:t,variant:"transparent",title:r._({id:"YzRRV6"}),children:e.jsx(Qt,{})})}),e.jsx($t,{opened:s,onClose:i})]})}function un(){return e.jsx(I,{position:"bottom-end",label:r._({id:"FcOU0s"}),children:e.jsx(N,{onClick:()=>En.open(),variant:"transparent","aria-label":"open-spotlight",children:e.jsx(Es,{})})})}function hn(){const s=Q(),[t,i]=P(de(n=>[n.user,n.username])),{colorScheme:o,toggleColorScheme:l}=Rt();return e.jsx(e.Fragment,{children:e.jsxs(v,{width:260,position:"bottom-end",children:[e.jsx(v.Target,{children:e.jsx(oe,{className:nn,children:e.jsxs(w,{gap:7,children:[i()?e.jsx(L,{fw:500,size:"sm",style:{lineHeight:1},mr:3,children:i()}):e.jsx(It,{height:20,width:40,radius:Ee.radiusDefault}),e.jsx(as,{})]})})}),e.jsxs(v.Dropdown,{children:[e.jsx(v.Label,{children:e.jsx(z,{id:"Tz0i8g"})}),e.jsx(v.Item,{leftSection:e.jsx(tt,{}),component:we,to:"/settings/user",children:e.jsx(z,{id:"ekfzWq"})}),t?.is_staff&&e.jsx(v.Item,{leftSection:e.jsx(Ve,{}),component:we,to:"/settings/system",children:e.jsx(z,{id:"zNkWa6"})}),t?.is_staff&&e.jsx(v.Item,{leftSection:e.jsx(Xe,{}),component:we,to:"/settings/admin",children:e.jsx(z,{id:"uTLn08"})}),t?.is_staff&&e.jsx(v.Divider,{}),e.jsx(v.Item,{onClick:l,leftSection:o==="dark"?e.jsx(Ss,{}):e.jsx(_s,{}),c:o==="dark"?Ee.colors.yellow[4]:Ee.colors.blue[6],children:e.jsx(z,{id:"4i3x9F"})}),e.jsx(v.Item,{onClick:()=>Je(),leftSection:e.jsx(Kt,{}),children:e.jsx(z,{id:"iDxamh"})}),e.jsx(v.Divider,{}),e.jsx(v.Item,{leftSection:e.jsx(ws,{}),onClick:()=>{Nt(s)},children:e.jsx(z,{id:"nOhz3x"})})]})]})})}const pn="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='400'%3e%3cg%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2.676'%3e%3cpath%20fill='%23ddbc91'%20d='M200%20199.906v193.196l166.305-96.016V103.139Z'/%3e%3cpath%20fill='%23d9b383'%20d='M200%20199.906v193.196L33.695%20297.086V103.139Z'/%3e%3cpath%20fill='%23ddbc91'%20d='M366.305%20103.139%20200%20199.906%2033.695%20103.14%20200%206.899z'/%3e%3cg%20fill='%23f3f4e4'%3e%3cpath%20d='M75.27%20127.109v145.46L200%20344.583l124.73-72.012V127.109L200%20199.684Z'/%3e%3cpath%20d='M324.73%20127.11%20200%20199.684%2075.27%20127.109%20200%2054.93Z'/%3e%3c/g%3e%3cpath%20fill='%23d9dbbc'%20d='M200%2054.929v144.756L75.27%20272.569V127.11z'/%3e%3cpath%20fill='%23eaeccf'%20d='M200%2054.929v144.756l124.73%2072.884V127.11z'/%3e%3cpath%20fill='%2390a8d8'%20d='M200%20199.901V296.5l83.153-48.008v-96.973zm0%200V296.5l-83.153-48.008v-96.973zm83.153-48.383L200%20199.9l-83.153-48.383L200%20103.398Z'/%3e%3c/g%3e%3cg%20fill='%2390a8d8'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%3e%3cpath%20d='M-546.667%20443.959v216.54l186.4-107.618V335.499Zm0%200v216.54l-186.4-107.618V335.499Z'/%3e%3cpath%20d='m-360.266%20335.499-186.4%20108.46-186.401-108.46%20186.4-107.87z'/%3e%3c/g%3e%3cg%20fill='%2390a8d8'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%3e%3cpath%20d='M-546.667%20227.419v216.54l186.4-107.619V118.96Zm0%200v216.54l-186.4-107.619V118.96Z'/%3e%3cpath%20d='m-360.266%20118.959-186.4%20108.46-186.401-108.46%20186.4-107.87z'/%3e%3c/g%3e%3cpath%20fill='%23ddbc91'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M-546.667%2010.879v216.54l186.4-107.619V-97.58Z'/%3e%3cpath%20fill='%23d9b383'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2.676'%20d='M-546.667%2010.879v216.54l-186.4-107.619V-97.58Z'/%3e%3cpath%20fill='%23ddbc91'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='m-360.266-97.581-186.4%20108.46-186.401-108.46%20186.4-107.87z'/%3e%3cg%20fill='%23f3f4e4'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.058'%3e%3cpath%20stroke-width='3'%20d='M-686.466-70.715V92.321l139.798%2080.714%20139.801-80.714V-70.715l-139.8%2081.346z'/%3e%3cpath%20stroke-width='2.999'%20d='m-406.866-70.715-139.8%2081.345-139.801-81.345%20139.8-80.902Z'/%3e%3c/g%3e%3cpath%20fill='%23d9dbbc'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M-546.667-151.617V10.63l-139.8%2081.692V-70.715z'/%3e%3cpath%20fill='%23eaeccf'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M-546.667-151.617V10.63l139.8%2081.692V-70.715z'/%3e%3cg%20fill='%2390a8d8'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2.999'%3e%3cpath%20d='M-546.667%2010.873v108.27l93.2-53.81v-108.69zm0%200v108.27l-93.2-53.81v-108.69z'/%3e%3cpath%20d='m-453.466-43.357-93.2%2054.23-93.201-54.23%2093.2-53.935Z'/%3e%3c/g%3e%3cpath%20fill='none'%20d='M-787.948-253.366h482.56v946.733h-482.56z'/%3e%3c/svg%3e";u.forwardRef((s,t)=>e.jsx("div",{ref:t,...s,children:e.jsx(xs,{to:"/",children:e.jsx(N,{size:28,variant:"transparent",children:e.jsx(Le,{})})})}));const Le=()=>e.jsx("img",{src:pn,alt:r._({id:"DVAy0b"}),height:28});function gn({openDrawer:s}){return e.jsx(oe,{onClick:()=>s(),"aria-label":"navigation-menu",children:e.jsx(Le,{})})}function G({title:s,links:t,beforeClick:i}){const o=Q(),l=u.useMemo(()=>t.filter(n=>!n.hidden),[t]);return l.length==0?null:e.jsx(e.Fragment,{children:e.jsxs(re,{gap:"xs",children:[e.jsx(Ae,{}),e.jsx(Me,{size:"md",children:s}),e.jsx(Ae,{}),e.jsx(Vt,{cols:{base:1,"400px":2},type:"container",spacing:0,p:3,children:l.map(n=>e.jsx(I,{label:n.description,hidden:!n.description,children:n.link&&n.external?e.jsx(Re,{href:n.link,children:e.jsxs(w,{wrap:"nowrap",children:[n.external&&e.jsx(He,{icon:n.icon??"link",iconProps:{size:"14"}}),e.jsx(L,{fw:500,p:5,children:n.title})]})}):e.jsx(oe,{onClick:a=>{n.link?(i?.(),B(n.link,o,a)):n.action&&(i?.(),n.action())},children:e.jsxs(w,{wrap:"nowrap",children:[n.icon&&e.jsx(He,{icon:n.icon,iconProps:{size:"14"}}),e.jsx(L,{fw:500,p:5,children:n.title})]})})},`menu-link-tooltip-${n.id}`))})]})})}const Ue=[];function mn({opened:s,close:t}){return e.jsx(Ie,{opened:s,onClose:t,size:"lg",withCloseButton:!1,classNames:{body:ln},children:e.jsx(fn,{closeFunc:t})})}function fn({closeFunc:s}){const t=P(),i=ge(),[o,l]=u.useState(0),n=u.useRef(null),{height:a}=Mt(),d=js();u.useEffect(()=>{n.current!=null&&l(a-n.current.clientHeight-65)});const p=u.useMemo(()=>[{id:"home",title:r._({id:"7p5kLi"}),link:"/",icon:"dashboard"},{id:"parts",title:r._({id:"pmRbKZ"}),hidden:!t.hasViewPermission(y.part),link:"/part",icon:"part"},{id:"stock",title:r._({id:"blbbPS"}),link:"/stock",hidden:!t.hasViewPermission(y.stockitem),icon:"stock"},{id:"build",title:r._({id:"3ctapx"}),link:"/manufacturing/",hidden:!t.hasViewRole(j.build),icon:"build"},{id:"purchasing",title:r._({id:"UOTpFa"}),link:"/purchasing/",hidden:!t.hasViewRole(j.purchase_order),icon:"purchase_orders"},{id:"sales",title:r._({id:"mUv9U4"}),link:"/sales/",hidden:!t.hasViewRole(j.sales_order),icon:"sales_orders"},{id:"users",title:r._({id:"Sxm8rQ"}),link:"/core/index/users",icon:"user"},{id:"groups",title:r._({id:"zhrjek"}),link:"/core/index/groups",icon:"group"}],[t]),c=u.useMemo(()=>[{id:"barcode",title:r._({id:"fNvDwV"}),link:"/scan",icon:"barcode",hidden:!i.isSet("BARCODE_ENABLE")}],[t,i]),f=u.useMemo(()=>[{id:"notifications",title:r._({id:"iDNBZe"}),link:"/notifications",icon:"notification"},{id:"user-settings",title:r._({id:"ekfzWq"}),link:"/settings/user",icon:"user"},{id:"system-settings",title:r._({id:"zNkWa6"}),link:"/settings/system",icon:"system",hidden:!t.isStaff()},{id:"admin-center",title:r._({id:"uTLn08"}),link:"/settings/admin",icon:"admin",hidden:!t.isStaff()}],[t]),h=u.useMemo(()=>is(),[]),g=u.useMemo(()=>os(i,t),[]);return e.jsxs(Be,{direction:"column",mih:"100vh",p:16,children:[e.jsxs(w,{wrap:"nowrap",children:[e.jsx(Le,{}),e.jsx(Me,{size:"xl",children:d})]}),e.jsx(q,{h:"xs"}),e.jsxs(Ne,{className:dt,p:0,children:[e.jsx(G,{title:r._({id:"UxKoFf"}),links:p,beforeClick:s}),e.jsx(G,{title:r._({id:"Tz0i8g"}),links:f,beforeClick:s}),e.jsx(G,{title:r._({id:"7L01XJ"}),links:c,beforeClick:s}),e.jsx(q,{h:"md"}),Ue.length>0?e.jsx(G,{title:r._({id:"ohUJJM"}),links:Ue,beforeClick:s}):e.jsx(e.Fragment,{})]}),e.jsxs("div",{ref:n,children:[e.jsx(q,{h:"md"}),e.jsx(G,{title:r._({id:"TvY/XA"}),links:h,beforeClick:s}),e.jsx(q,{h:"md"}),e.jsx(G,{title:r._({id:"uyJsf6"}),links:g,beforeClick:s})]})]})}function xn({notification:s,onRead:t}){const i=Q();let o=s.target?.link;const l=s.target?.model_type,n=s.target?.model_id;if(l){const a=Z[l];a?.url_detail&&n?o=Dt(l,n):a?.url_overview&&(o=a.url_overview)}return e.jsx(Lt,{p:"xs",shadow:"xs",children:e.jsxs(w,{justify:"space-between",wrap:"nowrap",children:[e.jsx(I,{label:s.message,position:"bottom-end",hidden:!s.message,children:e.jsxs(re,{gap:2,children:[e.jsx(Re,{href:o?`/${Ge()}${o}`:"#",underline:"hover",target:"_blank",onClick:a=>{o&&t(),o.startsWith("/")&&B(o,i,a)},children:e.jsx(L,{size:"sm",children:s.name})}),e.jsx(L,{size:"xs",children:s.age_human})]})}),e.jsx(I,{label:r._({id:"+s1J8k"}),position:"bottom-end",children:e.jsx(N,{variant:"transparent",onClick:t,children:e.jsx(et,{})})})]})})}function Sn({opened:s,onClose:t}){const{isLoggedIn:i}=P(),o=Q(),l=fe({enabled:s&&i(),queryKey:["notifications",s],queryFn:async()=>X.get(Y(J.notifications_list),{params:{read:!1,limit:10,ordering:"-creation"}}).then(p=>p.data),refetchOnMount:!1}),n=u.useMemo(()=>(l.data?.results?.length??0)>0,[l.data]),a=u.useCallback(()=>{X.get(Y(J.notifications_readall),{params:{read:!1}}).catch(p=>{}).then(p=>{l.refetch()})},[]),d=u.useCallback(p=>{X.patch(Y(J.notifications_list,p.pk),{read:!0}).then(()=>{l.refetch()}).catch(()=>{l.refetch()})},[]);return e.jsx(Ie,{opened:s,size:"md",position:"right",onClose:t,withCloseButton:!1,styles:{header:{width:"100%"},title:{width:"100%"}},title:e.jsxs(w,{justify:"space-between",wrap:"nowrap",children:[e.jsx(Me,{size:"lg",children:r._({id:"iDNBZe"})}),e.jsxs(w,{justify:"end",wrap:"nowrap",children:[e.jsx(I,{label:r._({id:"onllUU"}),children:e.jsx(N,{variant:"transparent",onClick:()=>{a()},children:e.jsx(et,{})})}),e.jsx(I,{label:r._({id:"/WA/tl"}),children:e.jsx(N,{onClick:p=>{t(),B("/notifications/unread",o,p)},variant:"transparent",children:e.jsx(ls,{})})})]})]}),children:e.jsx(ze,{label:"NotificationDrawer",children:e.jsxs(re,{gap:"xs",children:[e.jsx(Ae,{}),!l.isFetching&&!l.isLoading&&!l.isError&&!n&&e.jsx(ue,{color:"green",icon:e.jsx(zt,{}),children:e.jsx(L,{size:"sm",children:r._({id:"t2pqHO"})})}),n&&l.data?.results?.map(p=>e.jsx(xn,{notification:p,onRead:()=>d(p)},`notification-${p.pk}`)),l.isFetching&&e.jsx(Qe,{children:e.jsx($e,{size:"sm"})}),l.isError&&e.jsx(ue,{color:"red",title:r._({id:"SlfejT"}),icon:e.jsx(Ke,{}),children:e.jsx(L,{size:"sm",children:r._({id:"KEHQO1"})})})]})})})}function _n({searchText:s,query:t,navigate:i,onClose:o,onRemove:l,onResultClick:n}){const a=u.useMemo(()=>vs(t.model),[t.model]),d=u.useMemo(()=>t.overviewUrl?t.overviewUrl:a.url_overview,[t,a]),p=u.useCallback(c=>{if(Ot(c),d){const f=`${d}?search=${s}`;Ze(c)||o(),B(f,i,c)}else Ht({title:r._({id:"FXAptz"}),message:r._({id:"RPZ4Cq"}),color:"red",icon:e.jsx(Ke,{})})},[d,s]);return t.results.count==0?null:e.jsxs(ce.Item,{value:t.model,children:[e.jsx(ce.Control,{component:"div",children:e.jsxs(w,{justify:"space-between",children:[e.jsxs(w,{justify:"left",gap:5,wrap:"nowrap",children:[e.jsx(I,{label:r._({id:"XN9Er0"}),position:"top-start",children:e.jsx(N,{size:"sm",variant:"transparent",radius:"xs","aria-label":`view-all-results-${t.searchKey??t.model}`,disabled:!d,onClick:p,children:e.jsx(Ns,{})})}),e.jsx(L,{size:"lg",children:t.title??a.label_multiple}),e.jsxs(L,{size:"sm",style:{fontStyle:"italic"},children:[" ","- ",t.results.count," ",e.jsx(z,{id:"mO8KLE"})]})]}),e.jsxs(w,{justify:"right",wrap:"nowrap",children:[e.jsx(I,{label:r._({id:"8OvYje"}),position:"top-end",children:e.jsx(N,{size:"sm",color:"red",variant:"transparent",radius:"xs","aria-label":`remove-search-group-${t.model}`,onClick:()=>l(t.model),children:e.jsx(Zt,{})})}),e.jsx(q,{})]})]})}),e.jsx(ce.Panel,{children:e.jsx(re,{"aria-label":`search-group-results-${t.model}`,children:t.results.results.map(c=>e.jsx(Re,{underline:"never",onClick:f=>n(t.model,c.pk,f),children:e.jsx(ds,{instance:c,model:t.model})},`result-${t.model}-${c.pk}`))})})]},t.model)}function jn({opened:s,onClose:t}){const[i,o]=u.useState(""),[l]=cs(i,500),n=P(),a=me(),[d,p]=u.useState(!1),[c,f]=u.useState(!1),[h,g]=u.useState(!1);u.useEffect(()=>{p(a.isSet("SEARCH_REGEX",!1)),f(a.isSet("SEARCH_WHOLE",!1)),g(a.isSet("SEARCH_NOTES",!1))},[a.isSet("SEARCH_REGEX",!1),a.isSet("SEARCH_WHOLE",!1),a.isSet("SEARCH_NOTES",!1)]);const b=u.useMemo(()=>[{model:y.part,parameters:{active:a.isSet("SEARCH_HIDE_INACTIVE_PARTS")?!0:void 0},enabled:n.hasViewRole(j.part)&&a.isSet("SEARCH_PREVIEW_SHOW_PARTS")},{model:y.supplierpart,parameters:{part_detail:!0,supplier_detail:!0,manufacturer_detail:!0},enabled:n.hasViewRole(j.part)&&n.hasViewRole(j.purchase_order)&&a.isSet("SEARCH_PREVIEW_SHOW_SUPPLIER_PARTS")},{model:y.manufacturerpart,parameters:{part_detail:!0,supplier_detail:!0,manufacturer_detail:!0},enabled:n.hasViewRole(j.part)&&n.hasViewRole(j.purchase_order)&&a.isSet("SEARCH_PREVIEW_SHOW_MANUFACTURER_PARTS")},{model:y.partcategory,parameters:{},enabled:n.hasViewRole(j.part_category)&&a.isSet("SEARCH_PREVIEW_SHOW_CATEGORIES")},{model:y.stockitem,parameters:{part_detail:!0,location_detail:!0,in_stock:a.isSet("SEARCH_PREVIEW_HIDE_UNAVAILABLE_STOCK")?!0:void 0},enabled:n.hasViewRole(j.stock)&&a.isSet("SEARCH_PREVIEW_SHOW_STOCK")},{model:y.stocklocation,parameters:{},enabled:n.hasViewRole(j.stock_location)&&a.isSet("SEARCH_PREVIEW_SHOW_LOCATIONS")},{model:y.build,parameters:{part_detail:!0},enabled:n.hasViewRole(j.build)&&a.isSet("SEARCH_PREVIEW_SHOW_BUILD_ORDERS")},{model:y.company,overviewUrl:"/purchasing/index/suppliers",searchKey:"supplier",title:r._({id:"9RecCt"}),parameters:{},enabled:n.hasViewRole(j.purchase_order)&&a.isSet("SEARCH_PREVIEW_SHOW_COMPANIES")},{model:y.company,overviewUrl:"/purchasing/index/manufacturers",searchKey:"manufacturer",title:r._({id:"E0ub4Q"}),parameters:{},enabled:n.hasViewRole(j.purchase_order)&&a.isSet("SEARCH_PREVIEW_SHOW_COMPANIES")},{model:y.company,overviewUrl:"/sales/index/customers",searchKey:"customer",title:r._({id:"NihQNk"}),parameters:{},enabled:n.hasViewRole(j.sales_order)&&a.isSet("SEARCH_PREVIEW_SHOW_COMPANIES")},{model:y.purchaseorder,parameters:{supplier_detail:!0,outstanding:a.isSet("SEARCH_PREVIEW_EXCLUDE_INACTIVE_PURCHASE_ORDERS")?!0:void 0},enabled:n.hasViewRole(j.purchase_order)&&a.isSet("SEARCH_PREVIEW_SHOW_PURCHASE_ORDERS")},{model:y.salesorder,parameters:{customer_detail:!0,outstanding:a.isSet("SEARCH_PREVIEW_EXCLUDE_INACTIVE_SALES_ORDERS")?!0:void 0},enabled:n.hasViewRole(j.sales_order)&&a.isSet("SEARCH_PREVIEW_SHOW_SALES_ORDERS")},{model:y.salesordershipment,parameters:{},enabled:n.hasViewRole(j.sales_order)&&a.isSet("SEARCH_PREVIEW_SHOW_SALES_ORDER_SHIPMENTS")},{model:y.returnorder,parameters:{customer_detail:!0,outstanding:a.isSet("SEARCH_PREVIEW_EXCLUDE_INACTIVE_RETURN_ORDERS")?!0:void 0},enabled:n.hasViewRole(j.return_order)&&a.isSet("SEARCH_PREVIEW_SHOW_RETURN_ORDERS")}],[n,a]),x=u.useMemo(()=>b.filter(m=>m.enabled),[b]);u.useEffect(()=>{_.refetch()},[l]);const _=fe({queryKey:["search",l,d,c,h],queryFn:async()=>{if(!l)return[];const m={offset:0,limit:a.getSetting("SEARCH_PREVIEW_RESULTS","10"),search:l,search_regex:d,search_whole:c,search_notes:h};return x.forEach(S=>{const k=S.searchKey||S.model;m[k]=S.parameters}),X.post(Y(J.api_search),m).then(S=>S.data)}}),[M,R]=u.useState([]);u.useEffect(()=>{if(_.data){let m=x.filter(S=>(S.searchKey??S.model)in _.data);for(const S in _.data){const k=m.find(O=>(O.searchKey??O.model)==S);k&&(k.results=_.data[S])}m=m.filter(S=>S.results.count>0),R(m)}else R([])},[_.data]);function $(m){R(M.filter(S=>S.model!=m))}function U(){o(""),t()}const E=Q();function C(m,S,k){const O=Z[m];if(O.url_detail==null)return;Ze(k)||U();const K=O.url_detail.replace(":pk",S.toString());B(K,E,k)}return e.jsx(Ie,{opened:s,size:"xl",onClose:U,position:"right",withCloseButton:!1,styles:{header:{width:"100%"},title:{width:"100%"}},title:e.jsxs(w,{justify:"space-between",gap:1,wrap:"nowrap",children:[e.jsx(Tt,{"aria-label":"global-search-input",placeholder:r._({id:"Dwt0g3"}),value:i,onChange:m=>o(m.currentTarget.value),leftSection:e.jsx(he,{size:"0.8rem"}),rightSection:i&&e.jsx(bs,{color:"red",onClick:()=>o("")}),styles:{root:{width:"100%"}}}),e.jsx(I,{label:r._({id:"C0TDNl"}),position:"bottom-end",children:e.jsx(N,{size:"lg",variant:"transparent",onClick:()=>_.refetch(),children:e.jsx(Gt,{})})}),e.jsxs(v,{position:"bottom-end",children:[e.jsx(v.Target,{children:e.jsx(I,{label:r._({id:"9UYKcs"}),position:"bottom-end",children:e.jsx(N,{size:"lg",variant:"transparent",children:e.jsx(Ve,{})})})}),e.jsxs(v.Dropdown,{children:[e.jsx(v.Label,{children:r._({id:"9UYKcs"})}),e.jsx(v.Item,{children:e.jsx(Ce,{label:r._({id:"roauu/"}),checked:c,onChange:m=>f(m.currentTarget.checked)})}),e.jsx(v.Item,{children:e.jsx(Ce,{label:r._({id:"qkCZlJ"}),checked:d,onChange:m=>p(m.currentTarget.checked)})}),e.jsx(v.Item,{children:e.jsx(Ce,{label:r._({id:"74yzDd"}),checked:h,onChange:m=>g(m.currentTarget.checked)})})]})]})]}),children:e.jsxs(ze,{label:"SearchDrawer",children:[_.isFetching&&e.jsx(Qe,{children:e.jsx($e,{})}),!_.isFetching&&!_.isError&&e.jsx(re,{gap:"md",children:e.jsx(ce,{multiple:!0,defaultValue:x.map(m=>m.model),children:M.map((m,S)=>e.jsx(_n,{searchText:l,query:m,navigate:E,onClose:U,onRemove:k=>$(k),onResultClick:(k,O,K)=>C(k,O,K)},S))})}),_.isError&&e.jsx(ue,{color:"red",radius:"sm",variant:"light",title:r._({id:"SlfejT"}),icon:e.jsx(ks,{size:"1rem"}),children:e.jsx(z,{id:"hJCuaV"})}),l&&!_.isFetching&&!_.isError&&M.length==0&&e.jsx(ue,{color:"blue",radius:"sm",variant:"light",title:r._({id:"MA3x23"}),icon:e.jsx(he,{size:"1rem"}),children:e.jsx(z,{id:"dTtbrX"})})]})})}function bn(){const[s,t]=Fe(de(E=>[E.setNavigationOpen,E.navigationOpen])),[i]=Pt(de(E=>[E.server])),[o,{open:l,close:n}]=le(t),[a,{open:d,close:p}]=le(!1);qe([["/",()=>{d()}],["mod+/",()=>{d()}]]);const[c,{open:f,close:h}]=le(!1),{isLoggedIn:g}=P(),[b,x]=u.useState(0),A=ge(),_=me(),M=u.useMemo(()=>i.customize?.navbar_message,[i.customize]),R=qt(),$=fe({queryKey:["notification-count",R],enabled:g()&&R==="visible",queryFn:async()=>!g()||R!="visible"?null:X.get(Y(J.notifications_list),{params:{read:!1,limit:1}}).then(E=>(x(E?.data?.count??0),E.data??null)),refetchInterval:60*1e3,refetchOnMount:!0});u.useEffect(()=>{t!==o&&s(o)},[o]),u.useEffect(()=>{t!==o&&(t?l():n())},[t]);const U=u.useMemo(()=>_.isSet("STICKY_HEADER",!0)?{position:"sticky",zIndex:10,top:0}:{},[_]);return e.jsxs("div",{className:en,style:U,children:[e.jsx(jn,{opened:a,onClose:p}),e.jsx(mn,{opened:o,close:n}),e.jsx(Sn,{opened:c,onClose:()=>{$.refetch(),h()}}),e.jsx(Ne,{className:sn,size:"100%",children:e.jsxs(w,{justify:"space-between",children:[e.jsxs(w,{children:[e.jsx(gn,{openDrawer:l}),e.jsx(vn,{})]}),M&&e.jsx(L,{children:e.jsx("span",{dangerouslySetInnerHTML:{__html:M}})}),e.jsxs(w,{children:[e.jsx(I,{position:"bottom-end",label:r._({id:"A1taO8"}),children:e.jsx(N,{onClick:d,variant:"transparent","aria-label":"open-search",children:e.jsx(he,{})})}),_.isSet("SHOW_SPOTLIGHT")&&e.jsx(un,{}),A.isSet("BARCODE_ENABLE")&&e.jsx(dn,{}),e.jsx(Ut,{radius:"lg",size:"18",label:b,color:"red",disabled:b<=0,inline:!0,children:e.jsx(I,{position:"bottom-end",label:r._({id:"iDNBZe"}),children:e.jsx(N,{onClick:f,variant:"transparent","aria-label":"open-notifications",children:e.jsx(Xt,{})})})}),e.jsx(fs,{}),e.jsx(hn,{})]})]})})]})}function vn(){const s=P(),t=Q(),o=Yt(":tabName/*")?.params.tabName,l=Pe(s),n=me(),a=u.useMemo(()=>n.isSet("ICONS_IN_NAVBAR",!1),[n]),d=ms({featureType:"navigation",context:{}}),p=u.useMemo(()=>{const c=[];return Pe(s).forEach(h=>{h.role&&!s.hasViewRole(h.role)||c.push(e.jsx(ae.Tab,{value:h.name,leftSection:a&&h.icon&&e.jsx(N,{variant:"transparent",children:h.icon}),onClick:g=>B(`/${h.name}`,t,g),children:e.jsx(oe,{component:"a",href:Wt(`/${Ge()}/${h.name}`),children:h.title})},h.name))}),d.forEach(h=>{c.push(e.jsx(ae.Tab,{value:h.options.title,onClick:g=>B(h.options.options.url,t,g),children:h.options.title},h.options.key))}),c},[d,l,s,a]);return e.jsx(ae,{defaultValue:"home",classNames:{root:on,list:rn,tab:an},value:o,children:e.jsx(ae.List,{children:p.map(c=>c)})})}const kn=({children:s})=>{const t=Ye(),{isLoggedIn:i}=P();return i()?s:e.jsx(es,{to:"/logged-in",state:{redirectUrl:t.pathname,queryParams:t.search,anchor:t.hash}})},[yn,En]=rt();function Bn(){const s=Q(),t=Ye(),i=P(),o=me(),l=ge(),n=u.useMemo(()=>l.isSet("ENABLE_PLUGINS_INTERFACE"),[l]),a=hs(),d=Js(s),[p,c]=u.useState(d),f=fe({enabled:n,queryKey:["plugin-actions",n,i],refetchOnMount:!0,queryFn:async()=>{if(!n)return Promise.resolve([]);const g=Y(J.plugin_ui_features_list,void 0,{feature_type:gs.spotlight_action});return X.get(g).then(b=>b.data)}}),h=u.useMemo(()=>f?.data?.map(g=>{const b={...a,context:g.context};return{id:Ft(`a-${g.plugin_name}-${g.key}`),label:g.title,description:g.description,leftSection:g.icon&&e.jsx(us,{name:g.icon}),onClick:()=>{ps(g.source,"executeAction",b)}}})??[],[f?.data,a]);return u.useEffect(()=>{c([...d,...h])},[d.length,h.length,t]),e.jsx(kn,{children:e.jsxs(Be,{direction:"column",mih:"100vh",children:[e.jsx(bn,{}),e.jsx(Ne,{className:dt,size:"100%",children:e.jsx(ze,{label:"layout",children:e.jsx(Jt,{})})}),e.jsx(q,{h:"xl"}),e.jsx(cn,{}),o.isSet("SHOW_SPOTLIGHT")&&e.jsx(V,{actions:p,store:yn,highlightQuery:!0,searchProps:{leftSection:e.jsx(he,{size:"1.2rem"}),placeholder:r._({id:"YIix5Y"})},shortcut:["mod + K"],nothingFound:r._({id:"cNfZ4r"})})]})})}export{kn as ProtectedRoute,Bn as default,En as firstSpotlight,yn as firstStore};
//# sourceMappingURL=Layout-BNV_jbvu.js.map
