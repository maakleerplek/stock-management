import{r as o,c7 as f,u as g,j as t,aL as x,e as R,q as j,ab as u,bk as E,S as C,aq as $,d as S,a8 as v}from"./index-DjOBj_Ai.js";import{A as b}from"./DesktopAppView-D6tHFi_e.js";import{$ as L,C as P}from"./ThemeContext-BjJu0IKI.js";import{f as _}from"./PluginUIFeature-DWPwHUQS.js";function w({source:n,defaultFunctionName:l,context:e}){const i=o.useRef(null),s=o.useRef(null);o.useEffect(()=>{i.current&&s.current===null&&(s.current=f.createRoot(i.current))},[s]);const[p,d]=o.useState(void 0),c=o.useMemo(()=>{const{getHost:a}=g.getState(),r=new URL(n,a());return r.pathname.includes(":")&&r.pathname.split(":")[1]||l},[n,l]),h=o.useCallback(()=>{if(!s.current)return;const a={...e,reloadContent:h};n&&l?_(n,c).then(r=>{if(r)try{r.length>1?r(i.current,a):s.current?.render(t.jsx(b,{client:j,api:R,children:t.jsx(x,{theme:a.theme,defaultColorScheme:a.colorScheme,children:t.jsx(L,{children:r(a)})})})),d("")}catch(m){d(`${m}`),console.error(m)}else d(`${n} / ${r}`)}).catch(r=>{console.error(`ERR: Failed to load remote plugin function: ${n} /${c}`)}):d(`${u._({id:"wOa7Q9"})} - ${n} /${c}`)},[i.current,s.current,n,l,e]);return o.useEffect(()=>{h()},[c,s.current,e.id,e.model,e.instance,e.user,e.colorScheme,e.locale,e.context]),t.jsx(P,{label:E(`RemoteComponent-${c}`),children:t.jsxs(C,{gap:"xs",children:[p&&t.jsx($,{color:"red",title:u._({id:"HY5802"}),icon:t.jsx(v,{}),children:t.jsxs(S,{children:[u._({id:"IYgnvh"}),": ",p]})}),i&&t.jsx("div",{ref:i})]})})}export{w as R};
//# sourceMappingURL=RemoteComponent-CrOPmrx3.js.map
