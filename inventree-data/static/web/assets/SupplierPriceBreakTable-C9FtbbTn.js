import{ag as g,r as s,ab as t,an as l,ao as c,j as a,aO as p,A as S,aD as j,bc as A,N as w,d as k}from"./index-DjOBj_Ai.js";import{c as C,j as B,e as P,m as T}from"./Filter-CpWhllKn.js";import{u as R,R as U,a as q,I as M}from"./InvenTreeTable-C-s5lvnS.js";import{a as h}from"./formatters-Dkpc25sQ.js";import{C as D}from"./ColumnRenderers-BCeqgJNS.js";function E(e){const r=e?.part_detail?.pack_quantity_native??1;return Number.parseFloat(e.price)/r}function F(){return[{accessor:"supplier",title:t._({id:"PYTEl0"}),sortable:!0,switchable:!0,render:e=>a.jsx(D,{company:e.supplier_detail})},{accessor:"part_detail.SKU",title:t._({id:"y90mqQ"}),ordering:"SKU",sortable:!0,switchable:!1,render:e=>a.jsx(S,{href:j(A.supplierpart,e.part_detail.pk,!0),children:e.part_detail.SKU})},{accessor:"quantity",title:t._({id:"VbWX2u"}),sortable:!0,switchable:!1},{accessor:"price",title:t._({id:"kk1/TT"}),render:e=>h(e.price,{currency:e.price_currency}),sortable:!0,switchable:!1},{accessor:"unit_price",ordering:"price",title:t._({id:"vWelsN"}),sortable:!0,switchable:!0,render:e=>{const r=e.part_detail?.pack_quantity,i=h(E(e),{currency:e.price_currency});return a.jsxs(w,{justify:"space-between",gap:"xs",grow:!0,children:[a.jsx(k,{children:i}),r&&a.jsxs(k,{size:"xs",children:["[",r,"]"]})]})}}]}function X({supplierPart:e}){const r=R("supplierpricebreaks"),i=g(),y=s.useMemo(()=>F(),[]),n=s.useMemo(()=>({part:{hidden:!1,disabled:!0},quantity:{},price:{},price_currency:{}}),[]),[o,u]=s.useState(0),d=C({url:l(c.supplier_part_pricing_list),title:t._({id:"SXdWxL"}),fields:n,initialData:{part:e.pk,price_currency:e.supplier_detail.currency},table:r}),_=B({url:l(c.supplier_part_pricing_list),pk:o,title:t._({id:"l3gpbq"}),fields:n,table:r}),m=P({url:l(c.supplier_part_pricing_list),pk:o,title:t._({id:"ynVh1t"}),table:r}),f=s.useMemo(()=>[a.jsx(T,{tooltip:t._({id:"SXdWxL"}),onClick:()=>{d.open()},hidden:!i.hasAddRole(p.part)},"add-price-break")],[i]),x=s.useCallback(b=>[U({hidden:!i.hasChangeRole(p.purchase_order),onClick:()=>{u(b.pk),_.open()}}),q({hidden:!i.hasDeleteRole(p.purchase_order),onClick:()=>{u(b.pk),m.open()}})],[i]);return a.jsxs(a.Fragment,{children:[d.modal,_.modal,m.modal,a.jsx(M,{url:l(c.supplier_part_pricing_list),columns:y,tableState:r,props:{params:{part:e.pk,part_detail:!0,supplier_detail:!0},tableActions:f,rowActions:x}})]})}export{X as S,F as a,E as c};
//# sourceMappingURL=SupplierPriceBreakTable-C9FtbbTn.js.map
