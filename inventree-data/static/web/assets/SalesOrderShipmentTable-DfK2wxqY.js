import{ag as D,r as o,ab as e,ao as r,j as t,bc as p,aO as d,an as E}from"./index-DjOBj_Ai.js";import{c as x,e as V,j as B,d as G,m as q}from"./Filter-CpWhllKn.js";import{u as z,R as U,j as H,d as L,I as N}from"./InvenTreeTable-C-s5lvnS.js";import{Y as _}from"./YesNoButton-CYsvXLSb.js";import{b as C,c as O}from"./SalesOrderForms-EpMC8M0_.js";import{S as P,k as A,L as J,C as K}from"./ColumnRenderers-BCeqgJNS.js";import{a as Q,q as X}from"./ThemeContext-BjJu0IKI.js";function ie({showOrderInfo:i=!1,tableName:j,customerId:u,orderId:n,filters:v}){const a=D(),M=Q(),l=z(j??"sales-order-shipment"),[c,m]=o.useState({}),R=C({customerId:u}),w=C({customerId:u}),y=O({}),h=x({url:r.sales_order_shipment_list,fields:R,title:e._({id:"qU3Y7+"}),table:l,initialData:{order:n}}),b=V({url:r.sales_order_shipment_list,pk:c.pk,title:e._({id:"YAsuZ2"}),table:l}),S=B({url:r.sales_order_shipment_list,pk:c.pk,fields:w,title:e._({id:"rX/5YH"}),table:l}),k=x({url:r.sales_order_shipment_complete,pk:c.pk,fields:y,title:e._({id:"/IxVda"}),table:l,focus:"tracking_number",initialData:{...c,shipment_date:G().format("YYYY-MM-DD")}}),F=o.useMemo(()=>[{accessor:"customer",title:e._({id:"876pfE"}),switchable:!0,sortable:!0,hidden:!i,render:s=>t.jsx(K,{company:s.customer_detail})},{switchable:!1,accessor:"order_detail.reference",title:e._({id:"LozYBo"}),hidden:!i,sortable:!1},P({switchable:!0,model:p.salesorder,accessor:"order_detail.status",title:e._({id:"acIJ41"}),hidden:!i}),{accessor:"reference",title:e._({id:"Dwgrby"}),switchable:!1,sortable:!0},{accessor:"allocated_items",sortable:!0,switchable:!1,title:e._({id:"BzfzPK"})},{accessor:"checked",title:e._({id:"VSGGki"}),switchable:!0,sortable:!1,render:s=>t.jsx(_,{value:!!s.checked_by})},{accessor:"shipped",title:e._({id:"AoOqHM"}),switchable:!0,sortable:!1,render:s=>t.jsx(_,{value:!!s.shipment_date})},{accessor:"delivered",title:e._({id:"BTOhSm"}),switchable:!0,sortable:!1,render:s=>t.jsx(_,{value:!!s.delivery_date})},A({accessor:"shipment_date",title:e._({id:"MFQxyA"})}),A({accessor:"delivery_date",title:e._({id:"ovm9ir"})}),{accessor:"tracking_number"},{accessor:"invoice_number"},J({accessor:"link"})],[i]),g=o.useCallback(s=>{const f=!!s.shipment_date;return[{hidden:f||!a.hasChangeRole(d.sales_order),title:e._({id:"/IxVda"}),color:"green",icon:t.jsx(X,{}),onClick:()=>{m(s),k.open()}},U({hidden:!a.hasChangeRole(d.sales_order),tooltip:e._({id:"MPjEsC"}),onClick:()=>{m(s),S.open()}}),H({hidden:f||!a.hasDeleteRole(d.sales_order),tooltip:e._({id:"whI1i/"}),onClick:()=>{m(s),b.open()}}),L({title:e._({id:"iV6RGP"}),modelType:p.salesorder,modelId:s.order,hidden:!s.order||!i||!a.hasViewRole(d.sales_order),navigate:M})]},[i,a]),T=o.useMemo(()=>n?[t.jsx(q,{tooltip:e._({id:"77d67d"}),hidden:!a.hasAddRole(d.sales_order),onClick:()=>{h.open()}},"add-shipment")]:[],[n,a]),Y=o.useMemo(()=>[{name:"checked",label:e._({id:"VSGGki"}),description:e._({id:"xNtT7F"})},{name:"shipped",label:e._({id:"AoOqHM"}),description:e._({id:"zxYkrg"})},{name:"delivered",label:e._({id:"BTOhSm"}),description:e._({id:"DOexmc"})}],[]);return t.jsxs(t.Fragment,{children:[h.modal,S.modal,b.modal,k.modal,t.jsx(N,{url:E(r.sales_order_shipment_list),tableState:l,columns:F,props:{tableActions:T,tableFilters:Y,modelType:p.salesordershipment,enableSelection:!0,enableReports:!0,rowActions:g,params:{order:n,order_detail:!0,customer_detail:i,...v}}})]})}export{ie as S};
//# sourceMappingURL=SalesOrderShipmentTable-DfK2wxqY.js.map
