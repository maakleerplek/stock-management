import{ab as s,j as t,aq as g,S as _,N as x,ag as f,ah as p,a as S,az as h,r as c,b4 as d,aa as E,ac as j,a8 as k}from"./index-DjOBj_Ai.js";import{d as I}from"./links-gIae6K_e.js";function A(){const e=f(),[r]=p(S(o=>[o.server])),a=h(),[n,l]=c.useState([]),i=c.useMemo(()=>N(r,a).filter(o=>!n.includes(o.key)),[r,n,a]),u=c.useMemo(()=>i.some(o=>o.error),[i]);function m(o){l([...n,o])}return e.isStaff()&&i.length>0?t.jsxs(d,{withinPortal:!0,position:"bottom-end",children:[t.jsx(d.Target,{children:t.jsx(E,{position:"bottom-end",label:s._({id:"s4BX3A"}),children:t.jsx(j,{variant:"transparent","aria-label":"open-alerts",color:u?"red":"orange",children:t.jsx(k,{})})})}),t.jsx(d.Dropdown,{children:i.map(o=>t.jsx(d.Item,{children:t.jsx(b,{alert:o,closeAlert:m})},`alert-item-${o.key}`))})]}):null}function b({alert:e,closeAlert:r}){return t.jsx(g,{withCloseButton:!!r,color:e.error?"red":"orange",title:t.jsxs(x,{gap:"xs",children:[e.code&&`${e.code}: `,e.title]}),onClose:r?()=>r(e.key):void 0,children:t.jsxs(_,{gap:"xs",children:[e.message,e.code&&R(e.code)]})})}function N(e,r,a=!1){const n=Number.parseInt(r.getSetting("_PENDING_MIGRATIONS"))??0;return[{key:"debug",title:s._({id:"gri3Lv"}),code:"INVE-W4",message:s._({id:"+6qJ+8"}),condition:e?.debug_mode||!1},{key:"worker",title:s._({id:"/XqPnF"}),code:"INVE-W5",message:s._({id:"Kz2rIR"}),condition:!e?.worker_running},{key:"restart",title:s._({id:"Bb2P0T"}),code:"INVE-W6",message:s._({id:"ewxV3O"}),condition:r.isSet("SERVER_RESTART_REQUIRED")},{key:"email",title:s._({id:"K4BV4V"}),code:"INVE-W7",message:s._({id:"gGrqca"}),condition:!e?.email_configured},{key:"migrations",title:s._({id:"2uXaRL"}),code:"INVE-W8",message:s._({id:"5aV8JX"}),condition:n>0}].filter(i=>a||i.condition)}function R(e){return t.jsx("a",{href:`${I.errorcodes}#${e.toLowerCase()}`,target:"_blank",rel:"noreferrer",children:s._({id:"XTZa21",values:{code:e}})})}export{A,b as S,R as e,N as g};
//# sourceMappingURL=Alerts-Bb_RrL4j.js.map
