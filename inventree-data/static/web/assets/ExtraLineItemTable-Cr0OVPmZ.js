import{K as g,ag as I,r as n,ab as o,j as c,an as R}from"./index-DjOBj_Ai.js";import{c as D,j as L,e as b,m as F}from"./Filter-CpWhllKn.js";import{u as M,R as j,c as v,a as E,I as q}from"./InvenTreeTable-C-s5lvnS.js";import{a as A}from"./formatters-Dkpc25sQ.js";import{e as x}from"./CommonForms-B8LSJp62.js";import{D as K,h as N,b as T,N as W,L as U}from"./ColumnRenderers-BCeqgJNS.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M12 16l4 -4l-4 -4",key:"svg-0"}],["path",{d:"M8 12h8",key:"svg-1"}],["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-2"}]],G=g("outline","square-arrow-right","SquareArrowRight",z);function H({endpoint:i,orderId:u,orderDetailRefresh:l,currency:y,editable:t,role:s}){const r=M("extra-line-item"),a=I(),_=n.useMemo(()=>[{accessor:"reference",switchable:!1},K({}),N({accessor:"quantity",switchable:!1}),{accessor:"price",title:o._({id:"vWelsN"}),render:e=>A(e.price,{currency:e.price_currency})},{accessor:"total_price",title:o._({id:"KyZVKD"}),render:e=>A(e.price,{currency:e.price_currency,multiplier:e.quantity})},T({}),W({accessor:"notes"}),U({accessor:"link"})],[]),[f,p]=n.useState({}),[d,h]=n.useState(0),m=D({url:i,title:o._({id:"pwb7Yo"}),fields:x(),initialData:{...f,price_currency:y},onFormSuccess:l,table:r}),C=L({url:i,pk:d,title:o._({id:"vgosWS"}),fields:x(),onFormSuccess:l,table:r}),k=b({url:i,pk:d,title:o._({id:"tpKh8C"}),onFormSuccess:l,table:r}),w=n.useCallback(e=>[j({hidden:!t||!a.hasChangeRole(s),onClick:()=>{h(e.pk),C.open()}}),v({hidden:!t||!a.hasAddRole(s),onClick:()=>{p({...e}),m.open()}}),E({hidden:!t||!a.hasDeleteRole(s),onClick:()=>{h(e.pk),k.open()}})],[t,a,s]),S=n.useMemo(()=>[c.jsx(F,{tooltip:o._({id:"xnxWkO"}),hidden:!t||!a.hasAddRole(s),onClick:()=>{p({order:u}),m.open()}},"add-line-item")],[t,a,s]);return c.jsxs(c.Fragment,{children:[m.modal,C.modal,k.modal,c.jsx(q,{tableState:r,url:R(i),columns:_,props:{params:{order:u},rowActions:w,tableActions:S}})]})}export{H as E,G as I};
//# sourceMappingURL=ExtraLineItemTable-Cr0OVPmZ.js.map
