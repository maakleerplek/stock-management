{"version":3,"mappings":"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","names":["__iconNode","IconDeviceDesktop","createReactComponent","IconRestore","createPromise","resolver","Promise","resolve","useReauth","inputProps","setInputProps","useState","label","name","description","value","setValue","open","setOpen","setResolver","getReauthText","props","promise","onClick","result","positive","ReauthModal","jsx","Modal","_i18n","_","id","Stack","TextInput","event","currentTarget","jsxs","Group","Button","_Trans","SecurityContent","auth_config","sso_enabled","useServerApiState","useShallow","state","user","useUserState","Accordion","StylishText","EmailSection","ProviderSection","Alert","IconAlertCircle","MfaSection","ApiTokenTable","isSuperuser","AuthContextSection","auth_context","setAuthContext","fetchAuthContext","useCallback","authApi","apiUrl","ApiEndpoints","auth_session","then","resp","data","ActionIcon","IconRefresh","Table","methods","map","method","index","parseDate","at","selectedEmail","setSelectedEmail","newEmailValue","setNewEmailValue","isLoading","refetch","useQuery","queryKey","queryFn","auth_email","res","emailAvailable","useMemo","undefined","length","runServerAction","action","vals","email","catch","err","hideNotification","showNotification","title","message","color","Loader","SimpleGrid","xs","md","Radio","String","primary","Badge","verified","IconAt","status","response","errors","error","join","icon","IconX","ProviderButton","provider","ProviderLogin","auth_providers","availableProviders","configuredProviders","item","socialaccount","providers","filter","includes","removeProvider","uid","split","account","console","log","Grid","link","display","Text","recoveryCodes","setRecoveryCodes","recoveryCodesOpen","openRecoveryCodes","close","closeRecoveryCodes","useDisclosure","api","get","auth_authenticators","showRecoveryCodes","codes","removeTotp","runActionWithFallback","auth_totp","ResultType","viewRecoveryCodes","auth_recovery","removeWebauthn","code","auth_webauthn","authenticators","rows","token","type","last_used_at","created_at","usedFactors","Fragment","MfaAddSection","Code","unused_codes","used_codes","totpQrOpen","openTotpQr","closeTotpQr","totpQr","setTotpQr","registerRecoveryCodes","registerTotp","meta","secret","registerWebauthn","creation_options","create","publicKey","PublicKeyCredential","parseCreationOptionsFromJSON","credential","JSON","stringify","possibleFactors","function","used","factor","mfa","supported_types","totpError","setTotpError","Tooltip","QrRegistrationForm","totp_url","errorMsg","IconExclamationCircle","setMfaContext","mfa_context","getState","mfaFlow","flows","find","flow","FlowEnum","MfaReauthenticate","Reauthenticate","mfa_types","types","mfaCode","values","auth_mfa_reauthenticate","passwordInput","auth_reauthenticate","password","date","Date","toLocaleString","AccountDetailPanel","navigate","useNavigate","fetchUserState","userFields","first_name","last_name","editAccount","useEditApiFormModal","url","user_me","onFormSuccess","fields","successMessage","profileFields","displayname","position","location","active","contact","organisation","primary_group","editProfile","user_profile","accountDetailFields","username","YesNoUndefinedButton","profile","is_staff","is_superuser","profileDetailFields","modal","ActionDropdown","IconUser","IconEdit","tooltip","IconKey","renderDetailTable","ActionButton","0","getLkp","DEFAULT_THEME","colors","LOOKUP","Object","assign","keys","clr","UserTheme","height","theme","useMantineTheme","userTheme","setTheme","setLanguage","useLocalState","getRadiusFromValue","obj","SizeMarks","mark","radius","setRadius","changeRadius","r","key","toString","Container","LanguageSelect","IS_DEV","ColorToggle","ColorPicker","v","primaryColor","ColorInput","whiteColor","blackColor","Slider","val","Select","loader","AccountContent","base","SECONDARY_COL_HEIGHT","PluginSettingsGroup","Loadable","lazy","UserSettings","isLoggedIn","userSettingsPanels","IconUserCircle","content","IconLock","UserSettingList","IconSearch","IconBellCog","IconFileAnalytics","IconPlugConnected","PageTitle","SettingsHeader","PanelGroup","Skeleton"],"ignoreList":[0,1],"sources":["../../../../../../frontend/node_modules/@tabler/icons-react/dist/esm/icons/IconDeviceDesktop.mjs","../../../../../../frontend/node_modules/@tabler/icons-react/dist/esm/icons/IconRestore.mjs","../../../../../../frontend/src/pages/Index/Settings/AccountSettings/useConfirm.tsx","../../../../../../frontend/src/pages/Index/Settings/AccountSettings/SecurityContent.tsx","../../../../../../frontend/src/pages/Index/Settings/AccountSettings/AccountDetailPanel.tsx","../../../../../../frontend/src/pages/Index/Settings/AccountSettings/UserThemePanel.tsx","../../../../../../frontend/src/pages/Index/Settings/AccountSettings/UserPanel.tsx","../../../../../../frontend/src/pages/Index/Settings/UserSettings.tsx"],"sourcesContent":["/**\n * @license @tabler/icons-react v3.34.1 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M3 5a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10z\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M7 20h10\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M9 16v4\", \"key\": \"svg-2\" }], [\"path\", { \"d\": \"M15 16v4\", \"key\": \"svg-3\" }]];\nconst IconDeviceDesktop = createReactComponent(\"outline\", \"device-desktop\", \"DeviceDesktop\", __iconNode);\n\nexport { __iconNode, IconDeviceDesktop as default };\n//# sourceMappingURL=IconDeviceDesktop.mjs.map\n","/**\n * @license @tabler/icons-react v3.34.1 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M3.06 13a9 9 0 1 0 .49 -4.087\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M3 4.001v5h5\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0\", \"key\": \"svg-2\" }]];\nconst IconRestore = createReactComponent(\"outline\", \"restore\", \"Restore\", __iconNode);\n\nexport { __iconNode, IconRestore as default };\n//# sourceMappingURL=IconRestore.mjs.map\n","import { t } from '@lingui/core/macro';\nimport { Trans } from '@lingui/react/macro';\nimport { Button, Group, Modal, Stack, TextInput } from '@mantine/core';\nimport { type JSX, useState } from 'react';\n\n/* Adapted from https://daveteu.medium.com/react-custom-confirmation-box-458cceba3f7b */\nconst createPromise = () => {\n  let resolver: any;\n  return [\n    new Promise((resolve) => {\n      resolver = resolve;\n    }),\n    resolver\n  ];\n};\n\n/* Adapted from https://daveteu.medium.com/react-custom-confirmation-box-458cceba3f7b */\nexport const useConfirm = () => {\n  const [open, setOpen] = useState(false);\n  const [resolver, setResolver] = useState<((status: boolean) => void) | null>(\n    null\n  );\n  const [label, setLabel] = useState('');\n\n  const getConfirmation = async (text: string) => {\n    setLabel(text);\n    setOpen(true);\n    const [promise, resolve] = await createPromise();\n\n    setResolver(resolve);\n    return promise;\n  };\n\n  const onClick = async (status: boolean) => {\n    setOpen(false);\n    if (resolver) {\n      resolver(status);\n    }\n  };\n\n  const Confirmation = () => (\n    <Modal opened={open} onClose={() => setOpen(false)}>\n      {label}\n      <Button onClick={() => onClick(false)}> Cancel </Button>\n      <Button onClick={() => onClick(true)}> OK </Button>\n    </Modal>\n  );\n\n  return [getConfirmation, Confirmation];\n};\n\ntype InputProps = {\n  label: string;\n  name: string;\n  description: string;\n};\nexport const useReauth = (): [\n  (props: InputProps) => Promise<[string, boolean]>,\n  () => JSX.Element\n] => {\n  const [inputProps, setInputProps] = useState<InputProps>({\n    label: '',\n    name: '',\n    description: ''\n  });\n\n  const [value, setValue] = useState('');\n  const [open, setOpen] = useState(false);\n  const [resolver, setResolver] = useState<{\n    resolve: (result: string, positive: boolean) => void;\n  } | null>(null);\n\n  const getReauthText = async (props: InputProps) => {\n    setInputProps(props);\n    setOpen(true);\n    const [promise, resolve] = await createPromise();\n\n    setResolver({ resolve });\n    return promise;\n  };\n\n  const onClick = async (result: string, positive: boolean) => {\n    setOpen(false);\n    if (resolver) {\n      resolver.resolve(result, positive);\n    }\n  };\n\n  const ReauthModal = () => (\n    <Modal\n      opened={open}\n      onClose={() => setOpen(false)}\n      title={t`Reauthentication`}\n    >\n      <Stack>\n        <TextInput\n          required\n          label={inputProps.label}\n          name={inputProps.name}\n          description={inputProps.description}\n          value={value}\n          onChange={(event) => setValue(event.currentTarget.value)}\n        />\n        <Group justify='space-between'>\n          <Button onClick={() => onClick('', false)} color='red'>\n            <Trans>Cancel</Trans>\n          </Button>\n          <Button onClick={() => onClick(value, true)}>\n            <Trans>OK</Trans>\n          </Button>\n        </Group>\n      </Stack>\n    </Modal>\n  );\n\n  return [getReauthText, ReauthModal];\n};\n","import { create } from '@github/webauthn-json/browser-ponyfill';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { apiUrl } from '@lib/functions/Api';\nimport { type AuthConfig, type AuthProvider, FlowEnum } from '@lib/types/Auth';\nimport { t } from '@lingui/core/macro';\nimport { Trans } from '@lingui/react/macro';\nimport {\n  Accordion,\n  ActionIcon,\n  Alert,\n  Badge,\n  Button,\n  Code,\n  Grid,\n  Group,\n  Loader,\n  Modal,\n  Radio,\n  SimpleGrid,\n  Stack,\n  Table,\n  Text,\n  TextInput,\n  Tooltip\n} from '@mantine/core';\nimport { useDisclosure } from '@mantine/hooks';\nimport { hideNotification, showNotification } from '@mantine/notifications';\nimport {\n  IconAlertCircle,\n  IconAt,\n  IconExclamationCircle,\n  IconRefresh,\n  IconX\n} from '@tabler/icons-react';\nimport { useQuery } from '@tanstack/react-query';\nimport { useCallback, useMemo, useState } from 'react';\nimport { useShallow } from 'zustand/react/shallow';\nimport { api } from '../../../../App';\nimport { StylishText } from '../../../../components/items/StylishText';\nimport { ProviderLogin, authApi } from '../../../../functions/auth';\nimport { useServerApiState } from '../../../../states/ServerApiState';\nimport { useUserState } from '../../../../states/UserState';\nimport { ApiTokenTable } from '../../../../tables/settings/ApiTokenTable';\nimport { QrRegistrationForm } from './QrRegistrationForm';\nimport { useReauth } from './useConfirm';\n\nexport function SecurityContent() {\n  const [auth_config, sso_enabled] = useServerApiState(\n    useShallow((state) => [state.auth_config, state.sso_enabled])\n  );\n\n  const user = useUserState();\n\n  return (\n    <Stack>\n      <Accordion multiple defaultValue={['email']}>\n        <Accordion.Item value='email'>\n          <Accordion.Control>\n            <StylishText size='lg'>{t`Email Addresses`}</StylishText>\n          </Accordion.Control>\n          <Accordion.Panel>\n            <EmailSection />\n          </Accordion.Panel>\n        </Accordion.Item>\n        <Accordion.Item value='sso'>\n          <Accordion.Control>\n            <StylishText size='lg'>{t`Single Sign On`}</StylishText>\n          </Accordion.Control>\n          <Accordion.Panel>\n            {sso_enabled() ? (\n              <ProviderSection auth_config={auth_config} />\n            ) : (\n              <Alert\n                icon={<IconAlertCircle size='1rem' />}\n                title={t`Not enabled`}\n                color='yellow'\n              >\n                <Trans>Single Sign On is not enabled for this server </Trans>\n              </Alert>\n            )}\n          </Accordion.Panel>\n        </Accordion.Item>\n        <Accordion.Item value='mfa'>\n          <Accordion.Control>\n            <StylishText size='lg'>{t`Multi-Factor Authentication`}</StylishText>\n          </Accordion.Control>\n          <Accordion.Panel>\n            <MfaSection />\n          </Accordion.Panel>\n        </Accordion.Item>\n        <Accordion.Item value='token'>\n          <Accordion.Control>\n            <StylishText size='lg'>{t`Access Tokens`}</StylishText>\n          </Accordion.Control>\n          <Accordion.Panel>\n            <ApiTokenTable only_myself />\n          </Accordion.Panel>\n        </Accordion.Item>\n        {user.isSuperuser() && (\n          <Accordion.Item value='session'>\n            <Accordion.Control>\n              <StylishText size='lg'>{t`Session Information`}</StylishText>\n            </Accordion.Control>\n            <Accordion.Panel>\n              <AuthContextSection />\n            </Accordion.Panel>\n          </Accordion.Item>\n        )}\n      </Accordion>\n    </Stack>\n  );\n}\n\nfunction AuthContextSection() {\n  const [auth_context, setAuthContext] = useServerApiState(\n    useShallow((state) => [state.auth_context, state.setAuthContext])\n  );\n\n  const fetchAuthContext = useCallback(() => {\n    authApi(apiUrl(ApiEndpoints.auth_session)).then((resp) => {\n      setAuthContext(resp.data.data);\n    });\n  }, [setAuthContext]);\n\n  return (\n    <Stack gap='xs'>\n      <Group>\n        <ActionIcon\n          onClick={fetchAuthContext}\n          variant='transparent'\n          aria-label='refresh-auth-context'\n        >\n          <IconRefresh />\n        </ActionIcon>\n      </Group>\n\n      <Table>\n        <Table.Thead>\n          <Table.Tr>\n            <Table.Th>{t`Timestamp`}</Table.Th>\n            <Table.Th>{t`Method`}</Table.Th>\n          </Table.Tr>\n        </Table.Thead>\n        <Table.Tbody>\n          {auth_context?.methods?.map((method: any, index: number) => (\n            <Table.Tr key={`auth-method-${index}`}>\n              <Table.Td>{parseDate(method.at)}</Table.Td>\n              <Table.Td>{method.method}</Table.Td>\n            </Table.Tr>\n          ))}\n        </Table.Tbody>\n      </Table>\n    </Stack>\n  );\n}\n\nfunction EmailSection() {\n  const [selectedEmail, setSelectedEmail] = useState<string>('');\n  const [newEmailValue, setNewEmailValue] = useState('');\n  const { isLoading, data, refetch } = useQuery({\n    queryKey: ['emails'],\n    queryFn: () =>\n      authApi(apiUrl(ApiEndpoints.auth_email)).then((res) => res.data.data)\n  });\n  const emailAvailable = useMemo(() => {\n    return data == undefined || data.length == 0;\n  }, [data]);\n\n  function runServerAction(\n    action: 'patch' | 'post' | 'put' | 'delete' = 'post',\n    data?: any\n  ) {\n    const vals: any = data || { email: selectedEmail };\n    return authApi(apiUrl(ApiEndpoints.auth_email), undefined, action, vals)\n      .then(() => {\n        refetch();\n      })\n      .catch((err) => {\n        hideNotification('email-error');\n\n        showNotification({\n          id: 'email-error',\n          title: t`Error`,\n          message: t`Error while updating email`,\n          color: 'red'\n        });\n      });\n  }\n\n  if (isLoading) return <Loader />;\n\n  return (\n    <SimpleGrid cols={{ xs: 1, md: 2 }} spacing='sm'>\n      {emailAvailable ? (\n        <Stack gap='xs'>\n          <Alert\n            icon={<IconAlertCircle size='1rem' />}\n            title={t`Not Configured`}\n            color='yellow'\n          >\n            <Trans>Currently no email addresses are registered.</Trans>\n          </Alert>\n        </Stack>\n      ) : (\n        <Radio.Group\n          value={selectedEmail}\n          onChange={setSelectedEmail}\n          name='email_accounts'\n          label={t`The following email addresses are associated with your account:`}\n        >\n          <Stack mt='xs'>\n            {data.map((email: any) => (\n              <Radio\n                key={email.email}\n                value={String(email.email)}\n                label={\n                  <Group justify='space-apart'>\n                    {email.email}\n                    <Group justify='right'>\n                      {email.primary && (\n                        <Badge color='blue'>\n                          <Trans>Primary</Trans>\n                        </Badge>\n                      )}\n                      {email.verified ? (\n                        <Badge color='green'>\n                          <Trans>Verified</Trans>\n                        </Badge>\n                      ) : (\n                        <Badge color='yellow'>\n                          <Trans>Unverified</Trans>\n                        </Badge>\n                      )}\n                    </Group>\n                  </Group>\n                }\n              />\n            ))}\n            <Group>\n              <Button\n                onClick={() =>\n                  runServerAction('patch', {\n                    email: selectedEmail,\n                    primary: true\n                  })\n                }\n                disabled={!selectedEmail}\n              >\n                <Trans>Make Primary</Trans>\n              </Button>\n              <Button\n                onClick={() => runServerAction('put')}\n                disabled={!selectedEmail}\n              >\n                <Trans>Re-send Verification</Trans>\n              </Button>\n              <Button\n                onClick={() => runServerAction('delete')}\n                disabled={!selectedEmail}\n                color='red'\n              >\n                <Trans>Remove</Trans>\n              </Button>\n            </Group>\n          </Stack>\n        </Radio.Group>\n      )}\n      <Stack>\n        <StylishText size='md'>{t`Add Email Address`}</StylishText>\n        <TextInput\n          label={t`E-Mail`}\n          placeholder={t`E-Mail address`}\n          leftSection={<IconAt />}\n          aria-label='email-address-input'\n          value={newEmailValue}\n          onChange={(event) => setNewEmailValue(event.currentTarget.value)}\n        />\n        <Button\n          aria-label='email-address-submit'\n          onClick={() =>\n            runServerAction('post', { email: newEmailValue }).catch((err) => {\n              if (err.status == 400) {\n                showNotification({\n                  title: t`Error while adding email`,\n                  message: err.response.data.errors\n                    .map((error: any) => error.message)\n                    .join('\\n'),\n                  color: 'red',\n                  icon: <IconX />\n                });\n              }\n            })\n          }\n        >\n          <Trans>Add Email</Trans>\n        </Button>\n      </Stack>\n    </SimpleGrid>\n  );\n}\n\nfunction ProviderButton({ provider }: Readonly<{ provider: AuthProvider }>) {\n  return (\n    <Button\n      key={provider.id}\n      variant='outline'\n      onClick={() => ProviderLogin(provider, 'connect')}\n    >\n      <Group justify='space-between'>{provider.name}</Group>\n    </Button>\n  );\n}\n\nfunction ProviderSection({\n  auth_config\n}: Readonly<{ auth_config: AuthConfig | undefined }>) {\n  const [value, setValue] = useState<string>('');\n  const { isLoading, data, refetch } = useQuery({\n    queryKey: ['provider-list'],\n    queryFn: () =>\n      authApi(apiUrl(ApiEndpoints.auth_providers))\n        .then((res) => res?.data?.data ?? [])\n        .catch(() => [])\n  });\n\n  const availableProviders = useMemo(() => {\n    if (!auth_config || !data) return [];\n\n    const configuredProviders = data.map((item: any) => item.provider.id);\n    return auth_config.socialaccount.providers.filter(\n      (provider: any) => !configuredProviders.includes(provider.id)\n    );\n  }, [auth_config, data]);\n\n  function removeProvider() {\n    const [uid, provider] = value.split('$');\n    authApi(apiUrl(ApiEndpoints.auth_providers), undefined, 'delete', {\n      provider,\n      account: uid\n    })\n      .then(() => {\n        refetch();\n      })\n      .catch((res) => console.log(res.data));\n  }\n\n  if (isLoading) return <Loader />;\n\n  return (\n    <Grid>\n      <Grid.Col span={6}>\n        {data.length == 0 ? (\n          <Stack gap='xs'>\n            <Alert\n              icon={<IconAlertCircle size='1rem' />}\n              title={t`Not Configured`}\n              color='yellow'\n            >\n              <Trans>There are no providers connected to this account.</Trans>\n            </Alert>\n          </Stack>\n        ) : (\n          <Stack>\n            <Radio.Group\n              value={value}\n              onChange={setValue}\n              name='sso_accounts'\n              label={t`You can sign in to your account using any of the following providers`}\n            >\n              <Stack mt='xs'>\n                {data.map((link: any) => (\n                  <Radio\n                    key={link.uid}\n                    value={[link.uid, link.provider.id].join('$')}\n                    label={`${link.provider.name}: ${link.display}`}\n                  />\n                ))}\n              </Stack>\n            </Radio.Group>\n            <Button onClick={removeProvider}>\n              <Trans>Remove Provider Link</Trans>\n            </Button>\n          </Stack>\n        )}\n      </Grid.Col>\n      <Grid.Col span={6}>\n        <Stack>\n          <Text>Add SSO Account</Text>\n          {availableProviders === undefined ? (\n            <Text>\n              <Trans>Loading</Trans>\n            </Text>\n          ) : (\n            <Stack gap='xs'>\n              {availableProviders.map((provider: any) => (\n                <ProviderButton key={provider.id} provider={provider} />\n              ))}\n            </Stack>\n          )}\n        </Stack>\n      </Grid.Col>\n    </Grid>\n  );\n}\n\nfunction MfaSection() {\n  const [getReauthText, ReauthModal] = useReauth();\n  const [recoveryCodes, setRecoveryCodes] = useState<\n    Recoverycodes | undefined\n  >();\n  const [\n    recoveryCodesOpen,\n    { open: openRecoveryCodes, close: closeRecoveryCodes }\n  ] = useDisclosure(false);\n  const { isLoading, data, refetch } = useQuery({\n    queryKey: ['mfa-list'],\n    queryFn: () =>\n      api\n        .get(apiUrl(ApiEndpoints.auth_authenticators))\n        .then((res) => res?.data?.data ?? [])\n        .catch(() => [])\n  });\n\n  function showRecoveryCodes(codes: Recoverycodes) {\n    setRecoveryCodes(codes);\n    openRecoveryCodes();\n  }\n\n  const removeTotp = () => {\n    runActionWithFallback(\n      () =>\n        authApi(apiUrl(ApiEndpoints.auth_totp), undefined, 'delete').then(\n          () => {\n            refetch();\n            return ResultType.success;\n          }\n        ),\n      getReauthText\n    );\n  };\n  const viewRecoveryCodes = () => {\n    runActionWithFallback(\n      () =>\n        authApi(apiUrl(ApiEndpoints.auth_recovery), undefined, 'get').then(\n          (res) => {\n            showRecoveryCodes(res.data.data);\n            return ResultType.success;\n          }\n        ),\n      getReauthText\n    );\n  };\n  const removeWebauthn = (code: string) => {\n    runActionWithFallback(\n      () =>\n        authApi(apiUrl(ApiEndpoints.auth_webauthn), undefined, 'delete', {\n          authenticators: [code]\n        }).then(() => {\n          refetch();\n          return ResultType.success;\n        }),\n      getReauthText\n    );\n  };\n\n  const rows = useMemo(() => {\n    if (isLoading || !data) return null;\n    return data.map((token: any) => (\n      <Table.Tr key={`${token.created_at}-${token.type}`}>\n        <Table.Td>{token.type}</Table.Td>\n        <Table.Td>{parseDate(token.last_used_at)}</Table.Td>\n        <Table.Td>{parseDate(token.created_at)}</Table.Td>\n        <Table.Td>\n          {token.type == 'totp' && (\n            <Button color='red' onClick={removeTotp}>\n              <Trans>Remove</Trans>\n            </Button>\n          )}\n          {token.type == 'recovery_codes' && (\n            <Button onClick={viewRecoveryCodes}>\n              <Trans>View</Trans>\n            </Button>\n          )}\n          {token.type == 'webauthn' && (\n            <Button\n              color='red'\n              onClick={() => {\n                removeWebauthn(token.id);\n              }}\n            >\n              <Trans>Remove</Trans>\n            </Button>\n          )}\n        </Table.Td>\n      </Table.Tr>\n    ));\n  }, [data, isLoading]);\n\n  const usedFactors: string[] = useMemo(() => {\n    if (isLoading || !data) return [];\n    return data.map((token: any) => token.type);\n  }, [data]);\n\n  if (isLoading) return <Loader />;\n\n  return (\n    <>\n      <ReauthModal />\n      <SimpleGrid cols={{ xs: 1, md: 2 }} spacing='sm'>\n        {data.length == 0 ? (\n          <Stack gap='xs'>\n            <Alert\n              title={t`Not Configured`}\n              icon={<IconAlertCircle size='1rem' />}\n              color='yellow'\n            >\n              <Trans>No multi-factor tokens configured for this account</Trans>\n            </Alert>\n          </Stack>\n        ) : (\n          <Table stickyHeader striped highlightOnHover withTableBorder>\n            <Table.Thead>\n              <Table.Tr>\n                <Table.Th>\n                  <Trans>Type</Trans>\n                </Table.Th>\n                <Table.Th>\n                  <Trans>Last used at</Trans>\n                </Table.Th>\n                <Table.Th>\n                  <Trans>Created at</Trans>\n                </Table.Th>\n                <Table.Th>\n                  <Trans>Actions</Trans>\n                </Table.Th>\n              </Table.Tr>\n            </Table.Thead>\n            <Table.Tbody>{rows}</Table.Tbody>\n          </Table>\n        )}\n        <MfaAddSection\n          usedFactors={usedFactors}\n          refetch={refetch}\n          showRecoveryCodes={showRecoveryCodes}\n        />\n        <Modal\n          opened={recoveryCodesOpen}\n          onClose={() => {\n            refetch();\n            closeRecoveryCodes();\n          }}\n          title={t`Recovery Codes`}\n          centered\n        >\n          <StylishText size='lg'>\n            <Trans>Unused Codes</Trans>\n          </StylishText>\n          <Code>{recoveryCodes?.unused_codes?.join('\\n')}</Code>\n\n          <StylishText size='lg'>\n            <Trans>Used Codes</Trans>\n          </StylishText>\n          <Code>{recoveryCodes?.used_codes?.join('\\n')}</Code>\n        </Modal>\n      </SimpleGrid>\n    </>\n  );\n}\n\nenum ResultType {\n  success = 0,\n  reauth = 1,\n  mfareauth = 2,\n  error = 3\n}\n\nexport interface Recoverycodes {\n  type: string;\n  created_at: number;\n  last_used_at: null;\n  total_code_count: number;\n  unused_code_count: number;\n  unused_codes: string[];\n  used_code_count: number;\n  used_codes: string[];\n}\n\nfunction MfaAddSection({\n  usedFactors,\n  refetch,\n  showRecoveryCodes\n}: Readonly<{\n  usedFactors: string[];\n  refetch: () => void;\n  showRecoveryCodes: (codes: Recoverycodes) => void;\n}>) {\n  const [auth_config] = useServerApiState(\n    useShallow((state) => [state.auth_config])\n  );\n  const [totpQrOpen, { open: openTotpQr, close: closeTotpQr }] =\n    useDisclosure(false);\n  const [totpQr, setTotpQr] = useState<{ totp_url: string; secret: string }>();\n  const [value, setValue] = useState('');\n  const [getReauthText, ReauthModal] = useReauth();\n\n  const registerRecoveryCodes = async () => {\n    await runActionWithFallback(\n      () =>\n        authApi(apiUrl(ApiEndpoints.auth_recovery), undefined, 'post')\n          .then((res) => {\n            showRecoveryCodes(res.data.data);\n            return ResultType.success;\n          })\n          .catch((err) => {\n            showNotification({\n              title: t`Error while registering recovery codes`,\n              message: err.response.data.errors\n                .map((error: any) => error.message)\n                .join('\\n'),\n              color: 'red',\n              icon: <IconX />\n            });\n\n            return ResultType.error;\n          }),\n      getReauthText\n    );\n  };\n  const registerTotp = async () => {\n    await runActionWithFallback(\n      () =>\n        authApi(apiUrl(ApiEndpoints.auth_totp), undefined, 'get')\n          .then(() => ResultType.error)\n          .catch((err) => {\n            if (err.status == 404 && err.response.data.meta.secret) {\n              setTotpQr(err.response.data.meta);\n              openTotpQr();\n              return ResultType.success;\n            }\n            return ResultType.error;\n          }),\n      getReauthText\n    );\n  };\n  const registerWebauthn = async () => {\n    let data: any = {};\n    await runActionWithFallback(\n      () =>\n        authApi(apiUrl(ApiEndpoints.auth_webauthn), undefined, 'get').then(\n          (res) => {\n            data = res.data?.data;\n            if (data?.creation_options) {\n              return ResultType.success;\n            } else {\n              return ResultType.error;\n            }\n          }\n        ),\n      getReauthText\n    );\n    if (data?.creation_options == undefined) {\n      showNotification({\n        title: t`Error while registering WebAuthn authenticator`,\n        message: t`Please reload page and try again.`,\n        color: 'red',\n        icon: <IconX />\n      });\n    }\n\n    // register the webauthn authenticator with the browser\n    const resp = await create({\n      publicKey: PublicKeyCredential.parseCreationOptionsFromJSON(\n        data.creation_options.publicKey\n      )\n    });\n    authApi(apiUrl(ApiEndpoints.auth_webauthn), undefined, 'post', {\n      name: 'Master Key',\n      credential: JSON.stringify(resp)\n    })\n      .then(() => {\n        showNotification({\n          title: t`WebAuthn authenticator registered successfully`,\n          message: t`You can now use this authenticator for multi-factor authentication.`,\n          color: 'green'\n        });\n        refetch();\n        return ResultType.success;\n      })\n      .catch((err) => {\n        showNotification({\n          title: t`Error while registering WebAuthn authenticator`,\n          message: err.response.data.errors\n            .map((error: any) => error.message)\n            .join('\\n'),\n          color: 'red',\n          icon: <IconX />\n        });\n        return ResultType.error;\n      });\n  };\n\n  const possibleFactors = useMemo(() => {\n    return [\n      {\n        type: 'totp',\n        name: t`TOTP`,\n        description: t`Time-based One-Time Password`,\n        function: registerTotp,\n        used: usedFactors?.includes('totp')\n      },\n      {\n        type: 'recovery_codes',\n        name: t`Recovery Codes`,\n        description: t`One-Time pre-generated recovery codes`,\n        function: registerRecoveryCodes,\n        used: usedFactors?.includes('recovery_codes')\n      },\n      {\n        type: 'webauthn',\n        name: t`WebAuthn`,\n        description: t`Web Authentication (WebAuthn) is a web standard for secure authentication`,\n        function: registerWebauthn,\n        used: usedFactors?.includes('webauthn')\n      }\n    ].filter((factor) => {\n      return auth_config?.mfa?.supported_types.includes(factor.type);\n    });\n  }, [usedFactors, auth_config]);\n\n  const [totpError, setTotpError] = useState<string>('');\n\n  return (\n    <Stack>\n      <ReauthModal />\n      <StylishText size='md'>{t`Add Token`}</StylishText>\n      {possibleFactors.map((factor) => (\n        <Tooltip label={factor.description} key={factor.type}>\n          <Button\n            onClick={factor.function}\n            disabled={factor.used}\n            variant='outline'\n          >\n            {factor.name}\n          </Button>\n        </Tooltip>\n      ))}\n      <Modal\n        opened={totpQrOpen}\n        onClose={closeTotpQr}\n        title={<StylishText size='lg'>{t`Register TOTP Token`}</StylishText>}\n      >\n        <Stack>\n          <QrRegistrationForm\n            url={totpQr?.totp_url ?? ''}\n            secret={totpQr?.secret ?? ''}\n            value={value}\n            error={totpError}\n            setValue={setValue}\n          />\n          <Button\n            fullWidth\n            onClick={() =>\n              runActionWithFallback(\n                () =>\n                  authApi(apiUrl(ApiEndpoints.auth_totp), undefined, 'post', {\n                    code: value\n                  })\n                    .then(() => {\n                      setTotpError('');\n                      closeTotpQr();\n                      refetch();\n                      return ResultType.success;\n                    })\n                    .catch((error) => {\n                      const errorMsg = t`Error registering TOTP token`;\n\n                      setTotpError(\n                        error.response?.data?.errors[0]?.message ?? errorMsg\n                      );\n\n                      hideNotification('totp-error');\n                      showNotification({\n                        id: 'totp-error',\n                        title: t`Error`,\n                        message: errorMsg,\n                        color: 'red',\n                        icon: <IconExclamationCircle />\n                      });\n                      return ResultType.error;\n                    }),\n                getReauthText\n              )\n            }\n          >\n            <Trans>Submit</Trans>\n          </Button>\n        </Stack>\n      </Modal>\n    </Stack>\n  );\n}\n\nasync function runActionWithFallback(\n  action: () => Promise<ResultType>,\n  getReauthText: (props: any) => any\n) {\n  const { setAuthContext, setMfaContext, mfa_context } =\n    useServerApiState.getState();\n\n  const result = await action().catch((err) => {\n    setAuthContext(err.response.data?.data);\n    // check if we need to re-authenticate\n    if (err.status == 401) {\n      const mfaFlow = err.response.data.data.flows.find(\n        (flow: any) => flow.id == FlowEnum.MfaReauthenticate\n      );\n      if (mfaFlow) {\n        setMfaContext(mfaFlow);\n        return ResultType.mfareauth;\n      } else if (\n        err.response.data.data.flows.find(\n          (flow: any) => flow.id == FlowEnum.Reauthenticate\n        )\n      ) {\n        return ResultType.reauth;\n      } else {\n        return ResultType.error;\n      }\n    } else {\n      return ResultType.error;\n    }\n  });\n\n  // run the re-authentication flows as needed\n  if (result == ResultType.mfareauth) {\n    const mfa_types = mfa_context?.types || [];\n    const mfaCode = await getReauthText({\n      label: t`TOTP Code`,\n      name: 'TOTP',\n      description: t`Enter one of your codes: ${mfa_types}`\n    });\n\n    authApi(apiUrl(ApiEndpoints.auth_mfa_reauthenticate), undefined, 'post', {\n      code: mfaCode\n    })\n      .then((response) => {\n        setAuthContext(response.data?.data);\n        action();\n      })\n      .catch((err) => {\n        setAuthContext(err.response.data?.data);\n      });\n  } else if (result == ResultType.reauth) {\n    const passwordInput = await getReauthText({\n      label: t`Password`,\n      name: 'password',\n      description: t`Enter your password`\n    });\n\n    authApi(apiUrl(ApiEndpoints.auth_reauthenticate), undefined, 'post', {\n      password: passwordInput\n    })\n      .then((response) => {\n        setAuthContext(response.data?.data);\n        action();\n      })\n      .catch((err) => {\n        setAuthContext(err.response.data?.data);\n      });\n  }\n}\n\nexport const parseDate = (date: number) =>\n  date == null ? 'Never' : new Date(date * 1000).toLocaleString();\n","import { t } from '@lingui/core/macro';\nimport { Trans } from '@lingui/react/macro';\nimport { Badge, Group, Stack, Table } from '@mantine/core';\nimport { IconEdit, IconKey, IconUser } from '@tabler/icons-react';\nimport { useMemo } from 'react';\n\nimport { ActionButton } from '@lib/components/ActionButton';\nimport { YesNoUndefinedButton } from '@lib/components/YesNoButton';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport type { ApiFormFieldSet } from '@lib/types/Forms';\nimport { useNavigate } from 'react-router-dom';\nimport { useShallow } from 'zustand/react/shallow';\nimport { ActionDropdown } from '../../../../components/items/ActionDropdown';\nimport { StylishText } from '../../../../components/items/StylishText';\nimport { useEditApiFormModal } from '../../../../hooks/UseForm';\nimport { useUserState } from '../../../../states/UserState';\n\nexport function AccountDetailPanel() {\n  const navigate = useNavigate();\n\n  const [user, fetchUserState] = useUserState(\n    useShallow((state) => [state.user, state.fetchUserState])\n  );\n\n  const userFields: ApiFormFieldSet = useMemo(() => {\n    return {\n      first_name: {},\n      last_name: {}\n    };\n  }, []);\n\n  const editAccount = useEditApiFormModal({\n    title: t`Edit Account Information`,\n    url: ApiEndpoints.user_me,\n    onFormSuccess: fetchUserState,\n    fields: userFields,\n    successMessage: t`Account details updated`\n  });\n\n  const profileFields: ApiFormFieldSet = useMemo(() => {\n    return {\n      displayname: {},\n      position: {},\n      status: {},\n      location: {},\n      active: {},\n      contact: {},\n      type: {},\n      organisation: {},\n      primary_group: {}\n    };\n  }, []);\n\n  const editProfile = useEditApiFormModal({\n    title: t`Edit Profile Information`,\n    url: ApiEndpoints.user_profile,\n    onFormSuccess: fetchUserState,\n    fields: profileFields,\n    successMessage: t`Profile details updated`\n  });\n\n  const accountDetailFields = useMemo(\n    () => [\n      { label: t`Username`, value: user?.username },\n      { label: t`First Name`, value: user?.first_name },\n      { label: t`Last Name`, value: user?.last_name },\n      {\n        label: t`Active`,\n        value: <YesNoUndefinedButton value={user?.profile?.active} />\n      },\n      {\n        label: t`Staff Access`,\n        value: <YesNoUndefinedButton value={user?.is_staff} />\n      },\n      {\n        label: t`Superuser`,\n        value: <YesNoUndefinedButton value={user?.is_superuser} />\n      }\n    ],\n    [user]\n  );\n\n  const profileDetailFields = useMemo(\n    () => [\n      { label: t`Display Name`, value: user?.profile?.displayname },\n      { label: t`Position`, value: user?.profile?.position },\n      { label: t`Status`, value: user?.profile?.status },\n      { label: t`Location`, value: user?.profile?.location },\n      { label: t`Contact`, value: user?.profile?.contact },\n      { label: t`Type`, value: <Badge>{user?.profile?.type}</Badge> },\n      { label: t`Organisation`, value: user?.profile?.organisation },\n      { label: t`Primary Group`, value: user?.profile?.primary_group }\n    ],\n    [user]\n  );\n\n  return (\n    <>\n      {editAccount.modal}\n      {editProfile.modal}\n      <Stack gap='xs'>\n        <Group justify='space-between'>\n          <StylishText size='lg'>\n            <Trans>Account Details</Trans>\n          </StylishText>\n          <ActionDropdown\n            tooltip={t`Account Actions`}\n            icon={<IconUser />}\n            actions={[\n              {\n                name: t`Edit Account`,\n                icon: <IconEdit />,\n                tooltip: t`Edit Account Information`,\n                onClick: editAccount.open\n              },\n              {\n                name: t`Change Password`,\n                icon: <IconKey />,\n                tooltip: t`Change User Password`,\n                onClick: () => {\n                  navigate('/change-password');\n                }\n              }\n            ]}\n          />\n        </Group>\n        {renderDetailTable(accountDetailFields)}\n\n        <Group justify='space-between'>\n          <StylishText size='lg'>\n            <Trans>Profile Details</Trans>\n          </StylishText>\n          <ActionButton\n            text={t`Edit Profile`}\n            icon={<IconEdit />}\n            tooltip={t`Edit Profile Information`}\n            onClick={editProfile.open}\n            variant='light'\n          />\n        </Group>\n        {renderDetailTable(profileDetailFields)}\n      </Stack>\n    </>\n  );\n\n  function renderDetailTable(data: { label: string; value: any }[]) {\n    return (\n      <Table>\n        <Table.Tbody>\n          {data.map((item) => (\n            <Table.Tr key={item.label}>\n              <Table.Td>\n                <Trans>{item.label}</Trans>\n              </Table.Td>\n              <Table.Td>{item.value}</Table.Td>\n            </Table.Tr>\n          ))}\n        </Table.Tbody>\n      </Table>\n    );\n  }\n}\n","import { t } from '@lingui/core/macro';\nimport { Trans } from '@lingui/react/macro';\nimport {\n  ActionIcon,\n  Button,\n  ColorInput,\n  ColorPicker,\n  Container,\n  DEFAULT_THEME,\n  Group,\n  Loader,\n  Select,\n  Slider,\n  Table,\n  useMantineTheme\n} from '@mantine/core';\nimport { IconRestore } from '@tabler/icons-react';\nimport { useState } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { ColorToggle } from '../../../../components/items/ColorToggle';\nimport { LanguageSelect } from '../../../../components/items/LanguageSelect';\nimport { StylishText } from '../../../../components/items/StylishText';\nimport { SizeMarks } from '../../../../defaults/defaults';\nimport { IS_DEV } from '../../../../main';\nimport { useLocalState } from '../../../../states/LocalState';\n\nfunction getLkp(color: string) {\n  return { [DEFAULT_THEME.colors[color][6]]: color };\n}\nconst LOOKUP = Object.assign(\n  {},\n  ...Object.keys(DEFAULT_THEME.colors).map((clr) => getLkp(clr))\n);\n\nexport function UserTheme({ height }: Readonly<{ height: number }>) {\n  const theme = useMantineTheme();\n  const [userTheme, setTheme, setLanguage] = useLocalState(\n    useShallow((state) => [state.userTheme, state.setTheme, state.setLanguage])\n  );\n\n  // radius\n  function getRadiusFromValue(value: number) {\n    const obj = SizeMarks.find((mark) => mark.value === value);\n    if (obj) return obj.label;\n    return 'sm';\n  }\n\n  const [radius, setRadius] = useState(25);\n\n  function changeRadius(value: number) {\n    const r = getRadiusFromValue(value);\n    setRadius(value);\n\n    setTheme([{ key: 'radius', value: r.toString() }]);\n  }\n\n  return (\n    <Container w='100%' mih={height} p={0}>\n      <StylishText size='lg'>\n        <Trans>Display Settings</Trans>\n      </StylishText>\n      <Table>\n        <Table.Tbody>\n          <Table.Tr>\n            <Table.Td>\n              <Trans>Language</Trans>\n            </Table.Td>\n            <Table.Td>\n              <LanguageSelect width={200} />\n            </Table.Td>\n            <Table.Td>\n              {IS_DEV && (\n                <Button\n                  onClick={() => setLanguage('pseudo-LOCALE', true)}\n                  variant='light'\n                >\n                  <Trans>Use pseudo language</Trans>\n                </Button>\n              )}\n            </Table.Td>\n          </Table.Tr>\n          <Table.Tr>\n            <Table.Td>\n              <Trans>Color Mode</Trans>\n            </Table.Td>\n            <Table.Td>\n              <Group justify='left'>\n                <ColorToggle />\n              </Group>\n            </Table.Td>\n            <Table.Td />\n          </Table.Tr>\n          <Table.Tr>\n            <Table.Td>\n              <Trans>Highlight color</Trans>\n            </Table.Td>\n            <Table.Td>\n              <ColorPicker\n                format='hex'\n                onChange={(v) =>\n                  setTheme([{ key: 'primaryColor', value: LOOKUP[v] }])\n                }\n                withPicker={false}\n                swatches={Object.keys(LOOKUP)}\n              />\n            </Table.Td>\n            <Table.Td>\n              <Button color={theme.primaryColor} variant='light'>\n                <Trans>Example</Trans>\n              </Button>\n            </Table.Td>\n          </Table.Tr>\n          <Table.Tr>\n            <Table.Td>\n              <Trans>White color</Trans>\n            </Table.Td>\n            <Table.Td>\n              <ColorInput\n                aria-label='Color Picker White'\n                value={userTheme.whiteColor}\n                onChange={(v) => setTheme([{ key: 'whiteColor', value: v }])}\n              />\n            </Table.Td>\n            <Table.Td>\n              <ActionIcon\n                variant='default'\n                aria-label='Reset White Color'\n                onClick={() =>\n                  setTheme([{ key: 'whiteColor', value: '#FFFFFF' }])\n                }\n              >\n                <IconRestore />\n              </ActionIcon>\n            </Table.Td>\n          </Table.Tr>\n          <Table.Tr>\n            <Table.Td>\n              <Trans>Black color</Trans>\n            </Table.Td>\n            <Table.Td>\n              <ColorInput\n                aria-label='Color Picker Black'\n                value={userTheme.blackColor}\n                onChange={(v) => setTheme([{ key: 'blackColor', value: v }])}\n              />\n            </Table.Td>\n            <Table.Td>\n              <ActionIcon\n                variant='default'\n                aria-label='Reset Black Color'\n                onClick={() =>\n                  setTheme([{ key: 'blackColor', value: '#000000' }])\n                }\n              >\n                <IconRestore />\n              </ActionIcon>\n            </Table.Td>\n          </Table.Tr>\n          <Table.Tr>\n            <Table.Td>\n              <Trans>Border Radius</Trans>\n            </Table.Td>\n            <Table.Td>\n              <Slider\n                label={(val) => getRadiusFromValue(val)}\n                defaultValue={50}\n                step={25}\n                marks={SizeMarks}\n                value={radius}\n                onChange={changeRadius}\n                mb={18}\n              />\n            </Table.Td>\n          </Table.Tr>\n          <Table.Tr>\n            <Table.Td>\n              <Trans>Loader</Trans>\n            </Table.Td>\n            <Table.Td>\n              <Group justify='left'>\n                <Select\n                  aria-label='Loader Type Selector'\n                  data={[\n                    { value: 'bars', label: t`Bars` },\n                    { value: 'oval', label: t`Oval` },\n                    { value: 'dots', label: t`Dots` }\n                  ]}\n                  value={userTheme.loader}\n                  onChange={(v) => {\n                    if (v != null) setTheme([{ key: 'loader', value: v }]);\n                  }}\n                />\n              </Group>\n            </Table.Td>\n            <Table.Td>\n              <Group justify='left'>\n                <Loader type={userTheme.loader} mah={16} size='sm' />\n              </Group>\n            </Table.Td>\n          </Table.Tr>\n        </Table.Tbody>\n      </Table>\n    </Container>\n  );\n}\n","import { Container, Grid, SimpleGrid } from '@mantine/core';\n\nimport { AccountDetailPanel } from './AccountDetailPanel';\nimport { UserTheme } from './UserThemePanel';\n\nexport function AccountContent() {\n  const PRIMARY_COL_HEIGHT = 300;\n  const SECONDARY_COL_HEIGHT = PRIMARY_COL_HEIGHT / 2 - 8;\n\n  return (\n    <div>\n      <SimpleGrid cols={{ base: 1, md: 2 }} spacing='md'>\n        <Container w='100%'>\n          <AccountDetailPanel />\n        </Container>\n        <Grid gutter='md'>\n          <Grid.Col>\n            <UserTheme height={SECONDARY_COL_HEIGHT} />\n          </Grid.Col>\n        </Grid>\n      </SimpleGrid>\n    </div>\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport { Skeleton, Stack } from '@mantine/core';\nimport {\n  IconBellCog,\n  IconDeviceDesktop,\n  IconFileAnalytics,\n  IconLock,\n  IconPlugConnected,\n  IconSearch,\n  IconUserCircle\n} from '@tabler/icons-react';\nimport { lazy, useMemo } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport PageTitle from '../../../components/nav/PageTitle';\nimport { SettingsHeader } from '../../../components/nav/SettingsHeader';\nimport type { PanelType } from '../../../components/panels/Panel';\nimport { PanelGroup } from '../../../components/panels/PanelGroup';\nimport { UserSettingList } from '../../../components/settings/SettingList';\nimport { Loadable } from '../../../functions/loading';\nimport { useUserState } from '../../../states/UserState';\nimport { SecurityContent } from './AccountSettings/SecurityContent';\nimport { AccountContent } from './AccountSettings/UserPanel';\n\nconst PluginSettingsGroup = Loadable(\n  lazy(() => import('./PluginSettingsGroup'))\n);\n\n/**\n * User settings page\n */\nexport default function UserSettings() {\n  const [user, isLoggedIn] = useUserState(\n    useShallow((state) => [state.user, state.isLoggedIn])\n  );\n\n  const userSettingsPanels: PanelType[] = useMemo(() => {\n    return [\n      {\n        name: 'account',\n        label: t`Account`,\n        icon: <IconUserCircle />,\n        content: <AccountContent />\n      },\n      {\n        name: 'security',\n        label: t`Security`,\n        icon: <IconLock />,\n        content: <SecurityContent />\n      },\n      {\n        name: 'display',\n        label: t`Display Options`,\n        icon: <IconDeviceDesktop />,\n        content: (\n          <UserSettingList\n            keys={[\n              'ICONS_IN_NAVBAR',\n              'STICKY_HEADER',\n              'STICKY_TABLE_HEADER',\n              'SHOW_SPOTLIGHT',\n              'DATE_DISPLAY_FORMAT',\n              'FORMS_CLOSE_USING_ESCAPE',\n              'DISPLAY_STOCKTAKE_TAB',\n              'ENABLE_LAST_BREADCRUMB',\n              'SHOW_FULL_LOCATION_IN_TABLES',\n              'SHOW_FULL_CATEGORY_IN_TABLES'\n            ]}\n          />\n        )\n      },\n      {\n        name: 'search',\n        label: t`Search`,\n        icon: <IconSearch />,\n        content: (\n          <UserSettingList\n            keys={[\n              'SEARCH_WHOLE',\n              'SEARCH_REGEX',\n              'SEARCH_NOTES',\n              'SEARCH_PREVIEW_RESULTS',\n              'SEARCH_PREVIEW_SHOW_PARTS',\n              'SEARCH_HIDE_INACTIVE_PARTS',\n              'SEARCH_PREVIEW_SHOW_SUPPLIER_PARTS',\n              'SEARCH_PREVIEW_SHOW_MANUFACTURER_PARTS',\n              'SEARCH_PREVIEW_SHOW_CATEGORIES',\n              'SEARCH_PREVIEW_SHOW_STOCK',\n              'SEARCH_PREVIEW_HIDE_UNAVAILABLE_STOCK',\n              'SEARCH_PREVIEW_SHOW_LOCATIONS',\n              'SEARCH_PREVIEW_SHOW_COMPANIES',\n              'SEARCH_PREVIEW_SHOW_BUILD_ORDERS',\n              'SEARCH_PREVIEW_SHOW_PURCHASE_ORDERS',\n              'SEARCH_PREVIEW_EXCLUDE_INACTIVE_PURCHASE_ORDERS',\n              'SEARCH_PREVIEW_SHOW_SALES_ORDERS',\n              'SEARCH_PREVIEW_EXCLUDE_INACTIVE_SALES_ORDERS',\n              'SEARCH_PREVIEW_SHOW_SALES_ORDER_SHIPMENTS',\n              'SEARCH_PREVIEW_SHOW_RETURN_ORDERS',\n              'SEARCH_PREVIEW_EXCLUDE_INACTIVE_RETURN_ORDERS'\n            ]}\n          />\n        )\n      },\n      {\n        name: 'notifications',\n        label: t`Notifications`,\n        icon: <IconBellCog />,\n        content: (\n          <PluginSettingsGroup\n            mixin='notification'\n            global={false}\n            message={t`The settings below are specific to each available notification method`}\n          />\n        )\n      },\n      {\n        name: 'reporting',\n        label: t`Reporting`,\n        icon: <IconFileAnalytics />,\n        content: (\n          <UserSettingList\n            keys={['REPORT_INLINE', 'LABEL_INLINE', 'LABEL_DEFAULT_PRINTER']}\n          />\n        )\n      },\n      {\n        name: 'plugins',\n        label: t`Plugin Settings`,\n        icon: <IconPlugConnected />,\n        content: <PluginSettingsGroup global={false} />\n      }\n    ];\n  }, []);\n\n  if (!isLoggedIn()) {\n    return <Skeleton />;\n  }\n\n  return (\n    <>\n      <PageTitle title={t`User Settings`} />\n      <Stack gap='xs'>\n        <SettingsHeader\n          label='user'\n          title={t`User Settings`}\n          subtitle={\n            user?.first_name && user?.last_name\n              ? `${user?.first_name} ${user?.last_name}`\n              : null\n          }\n          shorthand={user?.username || ''}\n        />\n        <PanelGroup\n          pageKey='user-settings'\n          panels={userSettingsPanels}\n          model='usersettings'\n          id={null}\n        />\n      </Stack>\n    </>\n  );\n}\n"],"file":"UserSettings-C-Ssfuak.js"}