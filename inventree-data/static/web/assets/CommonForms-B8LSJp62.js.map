{"version":3,"file":"CommonForms-B8LSJp62.js","sources":["../../../../../../frontend/src/forms/CommonForms.tsx"],"sourcesContent":["import { IconUsers } from '@tabler/icons-react';\nimport { useMemo, useState } from 'react';\n\nimport type { ApiFormFieldSet } from '@lib/types/Forms';\nimport { t } from '@lingui/core/macro';\nimport type {\n  StatusCodeInterface,\n  StatusCodeListInterface\n} from '../components/render/StatusRenderer';\nimport { useGlobalStatusState } from '../states/GlobalStatusState';\n\nexport function projectCodeFields(): ApiFormFieldSet {\n  return {\n    code: {},\n    description: {},\n    responsible: {\n      icon: <IconUsers />\n    }\n  };\n}\n\nexport function useCustomStateFields(): ApiFormFieldSet {\n  // Status codes\n  const statusCodes = useGlobalStatusState();\n\n  // Selected base status class\n  const [statusClass, setStatusClass] = useState<string>('');\n\n  // Construct a list of status options based on the selected status class\n  const statusOptions: any[] = useMemo(() => {\n    const options: any[] = [];\n\n    const valuesList = Object.values(statusCodes.status ?? {}).find(\n      (value: StatusCodeListInterface) => value.status_class === statusClass\n    );\n\n    Object.values(valuesList?.values ?? {}).forEach(\n      (value: StatusCodeInterface) => {\n        options.push({\n          value: value.key,\n          display_name: value.label\n        });\n      }\n    );\n\n    return options;\n  }, [statusCodes, statusClass]);\n\n  return useMemo(() => {\n    return {\n      reference_status: {\n        onValueChange(value) {\n          setStatusClass(value);\n        }\n      },\n      logical_key: {\n        field_type: 'choice',\n        choices: statusOptions\n      },\n      key: {},\n      name: {},\n      label: {},\n      color: {},\n      model: {}\n    };\n  }, [statusOptions]);\n}\n\nexport function customUnitsFields(): ApiFormFieldSet {\n  return {\n    name: {},\n    definition: {},\n    symbol: {}\n  };\n}\n\nexport function extraLineItemFields(): ApiFormFieldSet {\n  return {\n    order: {\n      hidden: true\n    },\n    reference: {},\n    description: {},\n    quantity: {},\n    price: {},\n    price_currency: {},\n    project_code: {\n      description: t`Select project code for this line item`\n    },\n    notes: {},\n    link: {}\n  };\n}\n"],"names":["projectCodeFields","code","description","responsible","icon","IconUsers","useCustomStateFields","statusCodes","useGlobalStatusState","statusClass","setStatusClass","useState","statusOptions","useMemo","options","valuesList","Object","values","status","find","value","status_class","forEach","push","key","display_name","label","reference_status","onValueChange","logical_key","field_type","choices","name","color","model","customUnitsFields","definition","symbol","extraLineItemFields","order","hidden","reference","quantity","price","price_currency","project_code","_i18n","_","id","notes","link"],"mappings":"2GAWO,SAASA,GAAqC,CACnD,MAAO,CACLC,KAAM,CAAA,EACNC,YAAa,CAAA,EACbC,YAAa,CACXC,WAAOC,EAAA,CAAA,CAAS,CAAA,CAClB,CAEJ,CAEO,SAASC,GAAwC,CAEtD,MAAMC,EAAcC,EAAAA,EAGd,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAiB,EAAE,EAGnDC,EAAuBC,EAAAA,QAAQ,IAAM,CACzC,MAAMC,EAAiB,CAAA,EAEjBC,EAAaC,OAAOC,OAAOV,EAAYW,QAAU,CAAA,CAAE,EAAEC,KACxDC,GAAmCA,EAAMC,eAAiBZ,CAC7D,EAEAO,cAAOC,OAAOF,GAAYE,QAAU,CAAA,CAAE,EAAEK,QACrCF,GAA+B,CAC9BN,EAAQS,KAAK,CACXH,MAAOA,EAAMI,IACbC,aAAcL,EAAMM,KAAAA,CACrB,CACH,CACF,EAEOZ,CACT,EAAG,CAACP,EAAaE,CAAW,CAAC,EAE7B,OAAOI,EAAAA,QAAQ,KACN,CACLc,iBAAkB,CAChBC,cAAcR,EAAO,CACnBV,EAAeU,CAAK,CACtB,CAAA,EAEFS,YAAa,CACXC,WAAY,SACZC,QAASnB,CAAAA,EAEXY,IAAK,CAAA,EACLQ,KAAM,CAAA,EACNN,MAAO,CAAA,EACPO,MAAO,CAAA,EACPC,MAAO,CAAA,CAAC,GAET,CAACtB,CAAa,CAAC,CACpB,CAEO,SAASuB,GAAqC,CACnD,MAAO,CACLH,KAAM,CAAA,EACNI,WAAY,CAAA,EACZC,OAAQ,CAAA,CAAC,CAEb,CAEO,SAASC,GAAuC,CACrD,MAAO,CACLC,MAAO,CACLC,OAAQ,EAAA,EAEVC,UAAW,CAAA,EACXvC,YAAa,CAAA,EACbwC,SAAU,CAAA,EACVC,MAAO,CAAA,EACPC,eAAgB,CAAA,EAChBC,aAAc,CACZ3C,YAAW4C,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAwC,CAAC,EAExDC,MAAO,CAAA,EACPC,KAAM,CAAA,CAAC,CAEX"}