{"version":3,"file":"SalesOrderForms-EpMC8M0_.js","sources":["../../../../../../frontend/src/forms/SalesOrderForms.tsx"],"sourcesContent":["import { t } from '@lingui/core/macro';\nimport { Table } from '@mantine/core';\nimport {\n  IconAddressBook,\n  IconCalendar,\n  IconUser,\n  IconUsers\n} from '@tabler/icons-react';\nimport { useEffect, useMemo, useState } from 'react';\n\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport RemoveRowButton from '../components/buttons/RemoveRowButton';\nimport { StandaloneField } from '../components/forms/StandaloneField';\n\nimport { ProgressBar } from '@lib/components/ProgressBar';\nimport { apiUrl } from '@lib/functions/Api';\nimport type {\n  ApiFormAdjustFilterType,\n  ApiFormFieldSet,\n  ApiFormFieldType\n} from '@lib/types/Forms';\nimport type { TableFieldRowProps } from '../components/forms/fields/TableField';\nimport { useCreateApiFormModal } from '../hooks/UseForm';\nimport { useGlobalSettingsState } from '../states/SettingsStates';\nimport { RenderPartColumn } from '../tables/ColumnRenderers';\n\nexport function useSalesOrderFields({\n  duplicateOrderId\n}: {\n  duplicateOrderId?: number;\n}): ApiFormFieldSet {\n  const globalSettings = useGlobalSettingsState();\n\n  return useMemo(() => {\n    const fields: ApiFormFieldSet = {\n      reference: {},\n      description: {},\n      customer: {\n        disabled: duplicateOrderId != undefined,\n        filters: {\n          is_customer: true,\n          active: true\n        }\n      },\n      customer_reference: {},\n      project_code: {},\n      order_currency: {},\n      start_date: {\n        icon: <IconCalendar />\n      },\n      target_date: {\n        icon: <IconCalendar />\n      },\n      link: {},\n      contact: {\n        icon: <IconUser />,\n        adjustFilters: (value: ApiFormAdjustFilterType) => {\n          return {\n            ...value.filters,\n            company: value.data.customer\n          };\n        }\n      },\n      address: {\n        icon: <IconAddressBook />,\n        adjustFilters: (value: ApiFormAdjustFilterType) => {\n          return {\n            ...value.filters,\n            company: value.data.customer\n          };\n        }\n      },\n      responsible: {\n        icon: <IconUsers />\n      }\n    };\n\n    // Order duplication fields\n    if (!!duplicateOrderId) {\n      fields.duplicate = {\n        children: {\n          order_id: {\n            hidden: true,\n            value: duplicateOrderId\n          },\n          copy_lines: {},\n          copy_extra_lines: {}\n        }\n      };\n    }\n\n    if (!globalSettings.isSet('PROJECT_CODES_ENABLED', true)) {\n      delete fields.project_code;\n    }\n\n    return fields;\n  }, [duplicateOrderId, globalSettings]);\n}\n\nexport function useSalesOrderLineItemFields({\n  customerId,\n  orderId,\n  create,\n  currency\n}: {\n  customerId?: number;\n  orderId?: number;\n  create?: boolean;\n  currency?: string;\n}): ApiFormFieldSet {\n  const [salePrice, setSalePrice] = useState<string>('0');\n  const [partCurrency, setPartCurrency] = useState<string>(currency ?? '');\n  const [part, setPart] = useState<any>({});\n  const [quantity, setQuantity] = useState<string>('');\n\n  useEffect(() => {\n    if (!create || !part || !part.price_breaks) return;\n\n    const qty = quantity ? Number.parseInt(quantity, 10) : 0;\n\n    const applicablePriceBreaks = part.price_breaks\n      .filter(\n        (pb: any) => pb.price_currency == partCurrency && qty <= pb.quantity\n      )\n      .sort((a: any, b: any) => a.quantity - b.quantity);\n\n    if (applicablePriceBreaks.length)\n      setSalePrice(applicablePriceBreaks[0].price);\n  }, [part, quantity, partCurrency, create]);\n\n  return useMemo(() => {\n    const fields: ApiFormFieldSet = {\n      order: {\n        filters: {\n          customer_detail: true\n        },\n        disabled: true,\n        value: create ? orderId : undefined\n      },\n      part: {\n        filters: {\n          active: true,\n          salable: true,\n          price_breaks: true\n        },\n        onValueChange: (_: any, record?: any) => setPart(record)\n      },\n      reference: {},\n      quantity: {\n        onValueChange: setQuantity\n      },\n      sale_price: {\n        value: salePrice\n      },\n      sale_price_currency: {\n        value: partCurrency,\n        onValueChange: setPartCurrency\n      },\n      project_code: {\n        description: t`Select project code for this line item`\n      },\n      target_date: {},\n      notes: {},\n      link: {}\n    };\n\n    return fields;\n  }, [salePrice, partCurrency, orderId, create]);\n}\n\nfunction SalesOrderAllocateLineRow({\n  props,\n  record,\n  sourceLocation\n}: Readonly<{\n  props: TableFieldRowProps;\n  record: any;\n  sourceLocation?: number | null;\n}>) {\n  // Statically defined field for selecting the stock item\n  const stockItemField: ApiFormFieldType = useMemo(() => {\n    return {\n      field_type: 'related field',\n      api_url: apiUrl(ApiEndpoints.stock_item_list),\n      model: ModelType.stockitem,\n      filters: {\n        available: true,\n        part_detail: true,\n        location_detail: true,\n        location: sourceLocation,\n        cascade: sourceLocation ? true : undefined,\n        part: record.part\n      },\n      value: props.item.stock_item,\n      name: 'stock_item',\n      onValueChange: (value: any, instance: any) => {\n        props.changeFn(props.idx, 'stock_item', value);\n\n        // Update the allocated quantity based on the selected stock item\n        if (instance) {\n          const available = instance.quantity - instance.allocated;\n          const required = record.quantity - record.allocated;\n\n          let quantity = props.item?.quantity ?? 0;\n\n          quantity = Math.max(quantity, required);\n          quantity = Math.min(quantity, available);\n\n          if (quantity != props.item.quantity) {\n            props.changeFn(props.idx, 'quantity', quantity);\n          }\n        }\n      }\n    };\n  }, [sourceLocation, record, props]);\n\n  // Statically defined field for selecting the allocation quantity\n  const quantityField: ApiFormFieldType = useMemo(() => {\n    return {\n      field_type: 'number',\n      name: 'quantity',\n      required: true,\n      value: props.item.quantity,\n      onValueChange: (value: any) => {\n        props.changeFn(props.idx, 'quantity', value);\n      }\n    };\n  }, [props]);\n\n  return (\n    <Table.Tr key={`table-row-${props.idx}-${record.pk}`}>\n      <Table.Td>\n        <RenderPartColumn part={record.part_detail} />\n      </Table.Td>\n      <Table.Td>\n        <ProgressBar\n          value={record.allocated}\n          maximum={record.quantity}\n          progressLabel\n        />\n      </Table.Td>\n      <Table.Td>\n        <StandaloneField\n          fieldName='stock_item'\n          fieldDefinition={stockItemField}\n          error={props.rowErrors?.stock_item?.message}\n        />\n      </Table.Td>\n      <Table.Td>\n        <StandaloneField\n          fieldName='quantity'\n          fieldDefinition={quantityField}\n          error={props.rowErrors?.quantity?.message}\n        />\n      </Table.Td>\n      <Table.Td>\n        <RemoveRowButton onClick={() => props.removeFn(props.idx)} />\n      </Table.Td>\n    </Table.Tr>\n  );\n}\n\nexport function useAllocateToSalesOrderForm({\n  orderId,\n  shipmentId,\n  lineItems,\n  onFormSuccess\n}: {\n  orderId: number;\n  shipmentId?: number;\n  lineItems: any[];\n  onFormSuccess: (response: any) => void;\n}) {\n  const [sourceLocation, setSourceLocation] = useState<number | null>(null);\n\n  // Reset source location to known state\n  useEffect(() => {\n    setSourceLocation(null);\n  }, [orderId, shipmentId, lineItems]);\n\n  const fields: ApiFormFieldSet = useMemo(() => {\n    return {\n      // Non-submitted field to select the source location\n      source_location: {\n        exclude: true,\n        required: false,\n        field_type: 'related field',\n        api_url: apiUrl(ApiEndpoints.stock_location_list),\n        model: ModelType.stocklocation,\n        label: t`Source Location`,\n        description: t`Select the source location for the stock allocation`,\n        onValueChange: (value: any) => {\n          setSourceLocation(value);\n        }\n      },\n      items: {\n        field_type: 'table',\n        value: [],\n        headers: [\n          { title: t`Part`, style: { minWidth: '200px' } },\n          { title: t`Allocated`, style: { minWidth: '200px' } },\n          { title: t`Stock Item`, style: { width: '100%' } },\n          { title: t`Quantity`, style: { minWidth: '200px' } },\n          { title: '', style: { width: '50px' } }\n        ],\n        modelRenderer: (row: TableFieldRowProps) => {\n          const record =\n            lineItems.find((item) => item.pk == row.item.line_item) ?? {};\n\n          return (\n            <SalesOrderAllocateLineRow\n              key={`table-row-${row.idx}-${record.pk}`}\n              props={row}\n              record={record}\n              sourceLocation={sourceLocation}\n            />\n          );\n        }\n      },\n      shipment: {\n        filters: {\n          shipped: false,\n          order_detail: true,\n          order: orderId\n        }\n      }\n    };\n  }, [orderId, shipmentId, lineItems, sourceLocation]);\n\n  return useCreateApiFormModal({\n    title: t`Allocate Stock`,\n    url: ApiEndpoints.sales_order_allocate,\n    pk: orderId,\n    fields: fields,\n    onFormSuccess: onFormSuccess,\n    successMessage: t`Stock items allocated`,\n    size: '80%',\n    initialData: {\n      items: lineItems.map((item) => {\n        return {\n          line_item: item.pk,\n          quantity: 0,\n          stock_item: null\n        };\n      })\n    }\n  });\n}\n\nexport function useSalesOrderAllocateSerialsFields({\n  itemId,\n  orderId\n}: {\n  itemId: number;\n  orderId: number;\n}): ApiFormFieldSet {\n  return useMemo(() => {\n    return {\n      line_item: {\n        value: itemId,\n        hidden: true\n      },\n      quantity: {},\n      serial_numbers: {},\n      shipment: {\n        filters: {\n          order_detail: true,\n          order: orderId,\n          shipped: false\n        }\n      }\n    };\n  }, [itemId, orderId]);\n}\n\nexport function useSalesOrderShipmentFields({\n  customerId,\n  pending\n}: {\n  customerId?: number;\n  pending?: boolean;\n}): ApiFormFieldSet {\n  return useMemo(() => {\n    return {\n      order: {\n        disabled: true\n      },\n      reference: {},\n      shipment_date: {\n        hidden: pending ?? true\n      },\n      delivery_date: {\n        hidden: pending ?? true\n      },\n      shipment_address: {\n        placeholder: t`Leave blank to use the order address`,\n        filters: {\n          company: customerId,\n          ordering: '-primary'\n        }\n      },\n      tracking_number: {},\n      invoice_number: {},\n      link: {}\n    };\n  }, [customerId, pending]);\n}\n\nexport function useSalesOrderShipmentCompleteFields({\n  shipmentId\n}: {\n  shipmentId?: number;\n}): ApiFormFieldSet {\n  return useMemo(() => {\n    return {\n      shipment_date: {},\n      tracking_number: {},\n      invoice_number: {},\n      link: {}\n    };\n  }, [shipmentId]);\n}\n\nexport function useSalesOrderAllocationFields({\n  orderId,\n  shipment\n}: {\n  orderId?: number;\n  shipment: any;\n}): ApiFormFieldSet {\n  return useMemo(() => {\n    return {\n      item: {\n        // Cannot change item, but display for reference\n        disabled: true\n      },\n      quantity: {},\n      shipment: {\n        // Cannot change shipment once it has been shipped\n        disabled: !!shipment?.shipment_date,\n        // Order ID is required for this field to be accessed\n        hidden: !orderId,\n        filters: {\n          order: orderId,\n          shipped: false\n        }\n      }\n    };\n  }, [orderId, shipment]);\n}\n"],"names":["useSalesOrderFields","duplicateOrderId","globalSettings","useGlobalSettingsState","useMemo","fields","reference","description","customer","disabled","undefined","filters","is_customer","active","customer_reference","project_code","order_currency","start_date","icon","IconCalendar","target_date","link","contact","IconUser","adjustFilters","value","company","data","address","IconAddressBook","responsible","IconUsers","duplicate","children","order_id","hidden","copy_lines","copy_extra_lines","isSet","useSalesOrderLineItemFields","customerId","orderId","create","currency","salePrice","setSalePrice","useState","partCurrency","setPartCurrency","part","setPart","quantity","setQuantity","useEffect","price_breaks","qty","Number","parseInt","applicablePriceBreaks","filter","pb","price_currency","sort","a","b","length","price","order","customer_detail","salable","onValueChange","_","record","sale_price","sale_price_currency","_i18n","id","notes","SalesOrderAllocateLineRow","props","sourceLocation","stockItemField","field_type","api_url","apiUrl","ApiEndpoints","stock_item_list","model","ModelType","stockitem","available","part_detail","location_detail","location","cascade","item","stock_item","name","instance","changeFn","idx","allocated","required","Math","max","min","quantityField","jsxs","Table","jsx","RenderPartColumn","ProgressBar","StandaloneField","rowErrors","message","RemoveRowButton","removeFn","pk","useAllocateToSalesOrderForm","shipmentId","lineItems","onFormSuccess","setSourceLocation","source_location","exclude","stock_location_list","stocklocation","label","items","headers","title","style","minWidth","width","modelRenderer","row","find","line_item","shipment","shipped","order_detail","useCreateApiFormModal","url","sales_order_allocate","successMessage","size","initialData","map","useSalesOrderAllocateSerialsFields","itemId","serial_numbers","useSalesOrderShipmentFields","pending","shipment_date","delivery_date","shipment_address","placeholder","ordering","tracking_number","invoice_number","useSalesOrderShipmentCompleteFields","useSalesOrderAllocationFields"],"mappings":"gbA2BO,SAASA,EAAoB,CAClCC,iBAAAA,CAGF,EAAoB,CAClB,MAAMC,EAAiBC,EAAAA,EAEvB,OAAOC,EAAAA,QAAQ,IAAM,CACnB,MAAMC,EAA0B,CAC9BC,UAAW,CAAA,EACXC,YAAa,CAAA,EACbC,SAAU,CACRC,SAAUR,GAAoBS,KAC9BC,QAAS,CACPC,YAAa,GACbC,OAAQ,EAAA,CACV,EAEFC,mBAAoB,CAAA,EACpBC,aAAc,CAAA,EACdC,eAAgB,CAAA,EAChBC,WAAY,CACVC,WAAOC,EAAA,CAAA,CAAY,CAAA,EAErBC,YAAa,CACXF,WAAOC,EAAA,CAAA,CAAY,CAAA,EAErBE,KAAM,CAAA,EACNC,QAAS,CACPJ,WAAOK,EAAA,EAAQ,EACfC,cAAgBC,IACP,CACL,GAAGA,EAAMd,QACTe,QAASD,EAAME,KAAKnB,QAAAA,EAExB,EAEFoB,QAAS,CACPV,WAAOW,EAAA,EAAe,EACtBL,cAAgBC,IACP,CACL,GAAGA,EAAMd,QACTe,QAASD,EAAME,KAAKnB,QAAAA,EAExB,EAEFsB,YAAa,CACXZ,WAAOa,EAAA,CAAA,CAAS,CAAA,CAClB,EAIF,OAAM9B,IACJI,EAAO2B,UAAY,CACjBC,SAAU,CACRC,SAAU,CACRC,OAAQ,GACRV,MAAOxB,CAAAA,EAETmC,WAAY,CAAA,EACZC,iBAAkB,CAAA,CAAC,CACrB,GAICnC,EAAeoC,MAAM,wBAAyB,EAAI,GACrD,OAAOjC,EAAOU,aAGTV,CACT,EAAG,CAACJ,EAAkBC,CAAc,CAAC,CACvC,CAEO,SAASqC,EAA4B,CAC1CC,WAAAA,EACAC,QAAAA,EACAC,OAAAA,EACAC,SAAAA,CAMF,EAAoB,CAClB,KAAM,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAAiB,GAAG,EAChD,CAACC,EAAcC,CAAe,EAAIF,EAAAA,SAAiBH,GAAY,EAAE,EACjE,CAACM,EAAMC,CAAO,EAAIJ,EAAAA,SAAc,CAAA,CAAE,EAClC,CAACK,EAAUC,CAAW,EAAIN,EAAAA,SAAiB,EAAE,EAEnDO,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAI,CAACX,GAAU,CAACO,GAAQ,CAACA,EAAKK,aAAc,OAE5C,MAAMC,EAAMJ,EAAWK,OAAOC,SAASN,EAAU,EAAE,EAAI,EAEjDO,EAAwBT,EAAKK,aAChCK,OACEC,GAAYA,EAAGC,gBAAkBd,GAAgBQ,GAAOK,EAAGT,QAC9D,EACCW,KAAK,CAACC,EAAQC,IAAWD,EAAEZ,SAAWa,EAAEb,QAAQ,EAE/CO,EAAsBO,QACxBpB,EAAaa,EAAsB,CAAC,EAAEQ,KAAK,CAC/C,EAAG,CAACjB,EAAME,EAAUJ,EAAcL,CAAM,CAAC,EAElCtC,EAAAA,QAAQ,KACmB,CAC9B+D,MAAO,CACLxD,QAAS,CACPyD,gBAAiB,EAAA,EAEnB3D,SAAU,GACVgB,MAAOiB,EAASD,EAAU/B,MAAAA,EAE5BuC,KAAM,CACJtC,QAAS,CACPE,OAAQ,GACRwD,QAAS,GACTf,aAAc,EAAA,EAEhBgB,cAAeA,CAACC,EAAQC,IAAiBtB,EAAQsB,CAAM,CAAA,EAEzDlE,UAAW,CAAA,EACX6C,SAAU,CACRmB,cAAelB,CAAAA,EAEjBqB,WAAY,CACVhD,MAAOmB,CAAAA,EAET8B,oBAAqB,CACnBjD,MAAOsB,EACPuB,cAAetB,CAAAA,EAEjBjC,aAAc,CACZR,YAAWoE,EAAAJ,EAAE,CAAAK,GAAA,QAAA,CAAwC,CAAC,EAExDxD,YAAa,CAAA,EACbyD,MAAO,CAAA,EACPxD,KAAM,CAAA,CAAC,GAIR,CAACuB,EAAWG,EAAcN,EAASC,CAAM,CAAC,CAC/C,CAEA,SAASoC,EAA0B,CACjCC,MAAAA,EACAP,OAAAA,EACAQ,eAAAA,CAKD,EAAG,CAEF,MAAMC,EAAmC7E,EAAAA,QAAQ,KACxC,CACL8E,WAAY,gBACZC,QAASC,EAAOC,EAAaC,eAAe,EAC5CC,MAAOC,EAAUC,UACjB9E,QAAS,CACP+E,UAAW,GACXC,YAAa,GACbC,gBAAiB,GACjBC,SAAUb,EACVc,QAASd,EAAiB,GAAOtE,OACjCuC,KAAMuB,EAAOvB,IAAAA,EAEfxB,MAAOsD,EAAMgB,KAAKC,WAClBC,KAAM,aACN3B,cAAeA,CAAC7C,EAAYyE,IAAkB,CAI5C,GAHAnB,EAAMoB,SAASpB,EAAMqB,IAAK,aAAc3E,CAAK,EAGzCyE,EAAU,CACZ,MAAMR,EAAYQ,EAAS/C,SAAW+C,EAASG,UACzCC,EAAW9B,EAAOrB,SAAWqB,EAAO6B,UAE1C,IAAIlD,EAAW4B,EAAMgB,MAAM5C,UAAY,EAEvCA,EAAWoD,KAAKC,IAAIrD,EAAUmD,CAAQ,EACtCnD,EAAWoD,KAAKE,IAAItD,EAAUuC,CAAS,EAEnCvC,GAAY4B,EAAMgB,KAAK5C,UACzB4B,EAAMoB,SAASpB,EAAMqB,IAAK,WAAYjD,CAAQ,CAElD,CACF,CAAA,GAED,CAAC6B,EAAgBR,EAAQO,CAAK,CAAC,EAG5B2B,EAAkCtG,EAAAA,QAAQ,KACvC,CACL8E,WAAY,SACZe,KAAM,WACNK,SAAU,GACV7E,MAAOsD,EAAMgB,KAAK5C,SAClBmB,cAAgB7C,GAAe,CAC7BsD,EAAMoB,SAASpB,EAAMqB,IAAK,WAAY3E,CAAK,CAC7C,CAAA,GAED,CAACsD,CAAK,CAAC,EAEV,OACE4B,OAACC,EAAM,GAAN,CACC,SAAA,CAAAC,EAAAA,IAACD,EAAM,GAAN,CACC,SAAAC,EAAAA,IAACC,GAAiB,KAAMtC,EAAOmB,YAAY,CAAA,CAC7C,EACAkB,EAAAA,IAACD,EAAM,GAAN,CACC,eAACG,EAAA,CACC,MAAOvC,EAAO6B,UACd,QAAS7B,EAAOrB,SAChB,cAAa,GAAA,EAEjB,EACA0D,EAAAA,IAACD,EAAM,GAAN,CACC,eAACI,EAAA,CACC,UAAU,aACV,gBAAiB/B,EACjB,MAAOF,EAAMkC,WAAWjB,YAAYkB,QAAQ,EAEhD,EACAL,EAAAA,IAACD,EAAM,GAAN,CACC,eAACI,EAAA,CACC,UAAU,WACV,gBAAiBN,EACjB,MAAO3B,EAAMkC,WAAW9D,UAAU+D,QAAQ,EAE9C,EACAL,EAAAA,IAACD,EAAM,GAAN,CACC,SAAAC,EAAAA,IAACM,EAAA,CAAgB,QAAS,IAAMpC,EAAMqC,SAASrC,EAAMqB,GAAG,EAAE,CAAA,CAC5D,CAAA,GA3Ba,aAAarB,EAAMqB,GAAG,IAAI5B,EAAO6C,EAAE,EA4BlD,CAEJ,CAEO,SAASC,EAA4B,CAC1C7E,QAAAA,EACA8E,WAAAA,EACAC,UAAAA,EACAC,cAAAA,CAMF,EAAG,CACD,KAAM,CAACzC,EAAgB0C,CAAiB,EAAI5E,EAAAA,SAAwB,IAAI,EAGxEO,EAAAA,UAAU,IAAM,CACdqE,EAAkB,IAAI,CACxB,EAAG,CAACjF,EAAS8E,EAAYC,CAAS,CAAC,EAEnC,MAAMnH,EAA0BD,EAAAA,QAAQ,KAC/B,CAELuH,gBAAiB,CACfC,QAAS,GACTtB,SAAU,GACVpB,WAAY,gBACZC,QAASC,EAAOC,EAAawC,mBAAmB,EAChDtC,MAAOC,EAAUsC,cACjBC,MAAKpD,EAAAJ,EAAE,CAAAK,GAAA,QAAA,CAAiB,EACxBrE,YAAWoE,EAAAJ,EAAE,CAAAK,GAAA,QAAA,CAAqD,EAClEN,cAAgB7C,GAAe,CAC7BiG,EAAkBjG,CAAK,CACzB,CAAA,EAEFuG,MAAO,CACL9C,WAAY,QACZzD,MAAO,CAAA,EACPwG,QAAS,CACP,CAAEC,MAAKvD,EAAAJ,EAAE,CAAAK,GAAA,QAAA,CAAM,EAAGuD,MAAO,CAAEC,SAAU,OAAA,CAAQ,EAC7C,CAAEF,MAAKvD,EAAAJ,EAAE,CAAAK,GAAA,QAAA,CAAW,EAAGuD,MAAO,CAAEC,SAAU,OAAA,CAAQ,EAClD,CAAEF,MAAKvD,EAAAJ,EAAE,CAAAK,GAAA,QAAA,CAAY,EAAGuD,MAAO,CAAEE,MAAO,MAAA,CAAO,EAC/C,CAAEH,MAAKvD,EAAAJ,EAAE,CAAAK,GAAA,QAAA,CAAU,EAAGuD,MAAO,CAAEC,SAAU,OAAA,CAAQ,EACjD,CAAEF,MAAO,GAAIC,MAAO,CAAEE,MAAO,MAAA,CAAO,CAAG,EAEzCC,cAAgBC,GAA4B,CAC1C,MAAM/D,EACJgD,EAAUgB,KAAMzC,GAASA,EAAKsB,IAAMkB,EAAIxC,KAAK0C,SAAS,GAAK,CAAA,EAE7D,OACE5B,EAAAA,IAAC/B,EAAA,CAEC,MAAOyD,EACP,OAAA/D,EACA,eAAAQ,CAAA,EAHK,aAAauD,EAAInC,GAAG,IAAI5B,EAAO6C,EAAE,EAGP,CAGrC,CAAA,EAEFqB,SAAU,CACR/H,QAAS,CACPgI,QAAS,GACTC,aAAc,GACdzE,MAAO1B,CAAAA,CACT,CACF,GAED,CAACA,EAAS8E,EAAYC,EAAWxC,CAAc,CAAC,EAEnD,OAAO6D,EAAsB,CAC3BX,MAAKvD,EAAAJ,EAAE,CAAAK,GAAA,QAAA,CAAgB,EACvBkE,IAAKzD,EAAa0D,qBAClB1B,GAAI5E,EACJpC,OAAAA,EACAoH,cAAAA,EACAuB,eAAcrE,EAAAJ,EAAE,CAAAK,GAAA,QAAA,CAAuB,EACvCqE,KAAM,MACNC,YAAa,CACXlB,MAAOR,EAAU2B,IAAKpD,IACb,CACL0C,UAAW1C,EAAKsB,GAChBlE,SAAU,EACV6C,WAAY,IAAA,EAEf,CAAA,CACH,CACD,CACH,CAEO,SAASoD,EAAmC,CACjDC,OAAAA,EACA5G,QAAAA,CAIF,EAAoB,CAClB,OAAOrC,EAAAA,QAAQ,KACN,CACLqI,UAAW,CACThH,MAAO4H,EACPlH,OAAQ,EAAA,EAEVgB,SAAU,CAAA,EACVmG,eAAgB,CAAA,EAChBZ,SAAU,CACR/H,QAAS,CACPiI,aAAc,GACdzE,MAAO1B,EACPkG,QAAS,EAAA,CACX,CACF,GAED,CAACU,EAAQ5G,CAAO,CAAC,CACtB,CAEO,SAAS8G,EAA4B,CAC1C/G,WAAAA,EACAgH,QAAAA,CAIF,EAAoB,CAClB,OAAOpJ,EAAAA,QAAQ,KACN,CACL+D,MAAO,CACL1D,SAAU,EAAA,EAEZH,UAAW,CAAA,EACXmJ,cAAe,CACbtH,OAAQqH,GAAW,EAAA,EAErBE,cAAe,CACbvH,OAAQqH,GAAW,EAAA,EAErBG,iBAAkB,CAChBC,YAAWjF,EAAAJ,EAAE,CAAAK,GAAA,QAAA,CAAsC,EACnDjE,QAAS,CACPe,QAASc,EACTqH,SAAU,UAAA,CACZ,EAEFC,gBAAiB,CAAA,EACjBC,eAAgB,CAAA,EAChB1I,KAAM,CAAA,CAAC,GAER,CAACmB,EAAYgH,CAAO,CAAC,CAC1B,CAEO,SAASQ,EAAoC,CAClDzC,WAAAA,CAGF,EAAoB,CAClB,OAAOnH,EAAAA,QAAQ,KACN,CACLqJ,cAAe,CAAA,EACfK,gBAAiB,CAAA,EACjBC,eAAgB,CAAA,EAChB1I,KAAM,CAAA,CAAC,GAER,CAACkG,CAAU,CAAC,CACjB,CAEO,SAAS0C,EAA8B,CAC5CxH,QAAAA,EACAiG,SAAAA,CAIF,EAAoB,CAClB,OAAOtI,EAAAA,QAAQ,KACN,CACL2F,KAAM,CAEJtF,SAAU,EAAA,EAEZ0C,SAAU,CAAA,EACVuF,SAAU,CAERjI,SAAU,CAAC,CAACiI,GAAUe,cAEtBtH,OAAQ,CAACM,EACT9B,QAAS,CACPwD,MAAO1B,EACPkG,QAAS,EAAA,CACX,CACF,GAED,CAAClG,EAASiG,CAAQ,CAAC,CACxB"}